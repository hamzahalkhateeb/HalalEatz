import './polyfills.server.mjs';
import{a as me,b as Vr,c as Rr,d as Nr,e as Lr,f as Br,g as Ur,h as jr,k as qr,o as Ge,p as Hr,r as ge,s as Wr}from"./chunk-HYVU6XRF.mjs";import{$ as hi,$a as U,Aa as mn,Ab as Pr,Bb as gi,Ca as be,Eb as Dr,Ga as T,Ha as Er,I as at,Ia as b,Ja as fi,Jb as We,K as qe,Ka as a,Kb as Oe,L as Dt,La as l,Lb as Fr,M as ci,Ma as g,Mb as Ar,Na as H,Nb as yn,O as lt,Oa as E,Ob as pe,Pa as V,Qa as pi,R as di,Ra as J,Rb as Me,Sa as Y,Ta as K,U as ie,Ua as Sr,V as ui,Va as u,W as re,Wa as j,X as _r,Xa as N,Ya as kr,Za as L,_a as B,aa as y,ab as He,ba as _,bb as oe,ca as ct,cb as Ae,db as Or,eb as Xe,f as pr,fa as Ke,fb as Mr,g as fn,ga as Ft,i as mr,ka as ke,la as vr,lb as Tr,n as gr,qa as ve,qb as Ir,s as yr,sa as h,ta as x,tb as gn,ua as br,va as Cr,wa as xr,xa as Fe,ya as wr,za as pn,zb as mi}from"./chunk-RI6XZGD2.mjs";import{a as D,b as $,c as P,e as q,f as Aa,g as Z,h as hn}from"./chunk-NDYDZJSS.mjs";var ko=q((xh,So)=>{"use strict";var pt=P("fs"),Eo=P("url"),yl=P("child_process").spawn;So.exports=ki;ki.XMLHttpRequest=ki;function ki(n){"use strict";n=n||{};var e=this,t=P("http"),i=P("https"),r,o,s={},d=!1,c={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},p=Object.assign({},c),f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],m=["TRACE","TRACK","CONNECT"],C=!1,O=!1,I=!1,w={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),this.status=null,this.statusText=null;var M=function(v){return d||v&&f.indexOf(v.toLowerCase())===-1},te=function(v){return v&&m.indexOf(v)===-1};this.open=function(v,S,ne,Q,de){if(this.abort(),O=!1,I=!1,!te(v))throw new Error("SecurityError: Request method not allowed");s={method:v,url:S.toString(),async:typeof ne!="boolean"?!0:ne,user:Q||null,password:de||null},G(this.OPENED)},this.setDisableHeaderCheck=function(v){d=v},this.setRequestHeader=function(v,S){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!M(v))return console.warn('Refused to set unsafe header "'+v+'"'),!1;if(C)throw new Error("INVALID_STATE_ERR: send flag is true");return p[v]=S,!0},this.getResponseHeader=function(v){return typeof v=="string"&&this.readyState>this.OPENED&&o.headers[v.toLowerCase()]&&!O?o.headers[v.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||O)return"";var v="";for(var S in o.headers)S!=="set-cookie"&&S!=="set-cookie2"&&(v+=S+": "+o.headers[S]+`\r
`);return v.substr(0,v.length-2)},this.getRequestHeader=function(v){return typeof v=="string"&&p[v]?p[v]:""},this.send=function(v){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(C)throw new Error("INVALID_STATE_ERR: send has already been called");var S=!1,ne=!1,Q=Eo.parse(s.url),de;switch(Q.protocol){case"https:":S=!0;case"http:":de=Q.hostname;break;case"file:":ne=!0;break;case void 0:case"":de="localhost";break;default:throw new Error("Protocol not supported.")}if(ne){if(s.method!=="GET")throw new Error("XMLHttpRequest: Only GET method is supported");if(s.async)pt.readFile(unescape(Q.pathname),function(le,Ye){le?e.handleError(le,le.errno||-1):(e.status=200,e.responseText=Ye.toString("utf8"),e.response=Ye,G(e.DONE))});else try{this.response=pt.readFileSync(unescape(Q.pathname)),this.responseText=this.response.toString("utf8"),this.status=200,G(e.DONE)}catch(le){this.handleError(le,le.errno||-1)}return}var De=Q.port||(S?443:80),Je=Q.pathname+(Q.search?Q.search:"");if(p.Host=de,S&&De===443||De===80||(p.Host+=":"+Q.port),s.user){typeof s.password>"u"&&(s.password="");var ri=new Buffer(s.user+":"+s.password);p.Authorization="Basic "+ri.toString("base64")}if(s.method==="GET"||s.method==="HEAD")v=null;else if(v){p["Content-Length"]=Buffer.isBuffer(v)?v.length:Buffer.byteLength(v);var Ma=Object.keys(p);Ma.some(function(le){return le.toLowerCase()==="content-type"})||(p["Content-Type"]="text/plain;charset=UTF-8")}else s.method==="POST"&&(p["Content-Length"]=0);var Ta=n.agent||!1,Se={host:de,port:De,path:Je,method:s.method,headers:p,agent:Ta};if(S&&(Se.pfx=n.pfx,Se.key=n.key,Se.passphrase=n.passphrase,Se.cert=n.cert,Se.ca=n.ca,Se.ciphers=n.ciphers,Se.rejectUnauthorized=n.rejectUnauthorized!==!1),O=!1,s.async){var oi=S?i.request:t.request;C=!0,e.dispatchEvent("readystatechange");var si=function(le){if(o=le,o.statusCode===302||o.statusCode===303||o.statusCode===307){s.url=o.headers.location;var Ye=Eo.parse(s.url);de=Ye.hostname;var je={hostname:Ye.hostname,port:Ye.port,path:Ye.path,method:o.statusCode===303?"GET":s.method,headers:p};S&&(je.pfx=n.pfx,je.key=n.key,je.passphrase=n.passphrase,je.cert=n.cert,je.ca=n.ca,je.ciphers=n.ciphers,je.rejectUnauthorized=n.rejectUnauthorized!==!1),r=oi(je,si).on("error",ai),r.end();return}G(e.HEADERS_RECEIVED),e.status=o.statusCode,o.on("data",function(un){if(un){var Fa=Buffer.from(un);e.response=Buffer.concat([e.response,Fa])}C&&G(e.LOADING)}),o.on("end",function(){C&&(C=!1,G(e.DONE),e.responseText=e.response.toString("utf8"))}),o.on("error",function(un){e.handleError(un)})},ai=function(le){if(r.reusedSocket&&le.code==="ECONNRESET")return oi(Se,si).on("error",ai);e.handleError(le)};r=oi(Se,si).on("error",ai),n.autoUnref&&r.on("socket",le=>{le.unref()}),v&&r.write(v),r.end(),e.dispatchEvent("loadstart")}else{var It=".node-xmlhttprequest-content-"+process.pid,Pt=".node-xmlhttprequest-sync-"+process.pid;pt.writeFileSync(Pt,"","utf8");for(var Ia="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(S?"s":"")+".request;var options = "+JSON.stringify(Se)+";var responseText = '';var responseData = Buffer.alloc(0);var req = doRequest(options, function(response) {response.on('data', function(chunk) {  var data = Buffer.from(chunk);  responseText += data.toString('utf8');  responseData = Buffer.concat([responseData, data]);});response.on('end', function() {fs.writeFileSync('"+It+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText, data: responseData.toString('base64')}}), 'utf8');fs.unlinkSync('"+Pt+"');});response.on('error', function(error) {fs.writeFileSync('"+It+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+Pt+"');});}).on('error', function(error) {fs.writeFileSync('"+It+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+Pt+"');});"+(v?"req.write('"+JSON.stringify(v).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",Pa=yl(process.argv[0],["-e",Ia]),Bu;pt.existsSync(Pt););if(e.responseText=pt.readFileSync(It,"utf8"),Pa.stdin.end(),pt.unlinkSync(It),e.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var Da=JSON.parse(e.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,""));e.handleError(Da,503)}else{e.status=e.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1");var li=JSON.parse(e.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"));o={statusCode:e.status,headers:li.data.headers},e.responseText=li.data.text,e.response=Buffer.from(li.data.data,"base64"),G(e.DONE,!0)}}},this.handleError=function(v,S){this.status=S||0,this.statusText=v,this.responseText=v.stack,O=!0,G(this.DONE)},this.abort=function(){r&&(r.abort(),r=null),p=Object.assign({},c),this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),O=I=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||C)&&this.readyState!==this.DONE&&(C=!1,G(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(v,S){v in w||(w[v]=[]),w[v].push(S)},this.removeEventListener=function(v,S){v in w&&(w[v]=w[v].filter(function(ne){return ne!==S}))},this.dispatchEvent=function(v){if(typeof e["on"+v]=="function"&&(this.readyState===this.DONE&&s.async?setTimeout(function(){e["on"+v]()},0):e["on"+v]()),v in w)for(let S=0,ne=w[v].length;S<ne;S++)this.readyState===this.DONE?setTimeout(function(){w[v][S].call(e)},0):w[v][S].call(e)};var G=function(v){if(!(e.readyState===v||e.readyState===e.UNSENT&&I)&&(e.readyState=v,(s.async||e.readyState<e.OPENED||e.readyState===e.DONE)&&e.dispatchEvent("readystatechange"),e.readyState===e.DONE)){let S;I?S="abort":O?S="error":S="load",e.dispatchEvent(S),e.dispatchEvent("loadend")}}}});var jo=q((Nh,Uo)=>{"use strict";var mt=1e3,gt=mt*60,yt=gt*60,et=yt*24,El=et*7,Sl=et*365.25;Uo.exports=function(n,e){e=e||{};var t=typeof n;if(t==="string"&&n.length>0)return kl(n);if(t==="number"&&isFinite(n))return e.long?Ml(n):Ol(n);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))};function kl(n){if(n=String(n),!(n.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(n);if(e){var t=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return t*Sl;case"weeks":case"week":case"w":return t*El;case"days":case"day":case"d":return t*et;case"hours":case"hour":case"hrs":case"hr":case"h":return t*yt;case"minutes":case"minute":case"mins":case"min":case"m":return t*gt;case"seconds":case"second":case"secs":case"sec":case"s":return t*mt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Ol(n){var e=Math.abs(n);return e>=et?Math.round(n/et)+"d":e>=yt?Math.round(n/yt)+"h":e>=gt?Math.round(n/gt)+"m":e>=mt?Math.round(n/mt)+"s":n+"ms"}function Ml(n){var e=Math.abs(n);return e>=et?Vn(n,e,et,"day"):e>=yt?Vn(n,e,yt,"hour"):e>=gt?Vn(n,e,gt,"minute"):e>=mt?Vn(n,e,mt,"second"):n+" ms"}function Vn(n,e,t,i){var r=e>=t*1.5;return Math.round(n/t)+" "+i+(r?"s":"")}});var Pi=q((Lh,qo)=>{"use strict";function Tl(n){t.debug=t,t.default=t,t.coerce=c,t.disable=o,t.enable=r,t.enabled=s,t.humanize=jo(),t.destroy=p,Object.keys(n).forEach(f=>{t[f]=n[f]}),t.names=[],t.skips=[],t.formatters={};function e(f){let m=0;for(let C=0;C<f.length;C++)m=(m<<5)-m+f.charCodeAt(C),m|=0;return t.colors[Math.abs(m)%t.colors.length]}t.selectColor=e;function t(f){let m,C=null,O,I;function w(...M){if(!w.enabled)return;let te=w,G=Number(new Date),v=G-(m||G);te.diff=v,te.prev=m,te.curr=G,m=G,M[0]=t.coerce(M[0]),typeof M[0]!="string"&&M.unshift("%O");let S=0;M[0]=M[0].replace(/%([a-zA-Z%])/g,(Q,de)=>{if(Q==="%%")return"%";S++;let De=t.formatters[de];if(typeof De=="function"){let Je=M[S];Q=De.call(te,Je),M.splice(S,1),S--}return Q}),t.formatArgs.call(te,M),(te.log||t.log).apply(te,M)}return w.namespace=f,w.useColors=t.useColors(),w.color=t.selectColor(f),w.extend=i,w.destroy=t.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>C!==null?C:(O!==t.namespaces&&(O=t.namespaces,I=t.enabled(f)),I),set:M=>{C=M}}),typeof t.init=="function"&&t.init(w),w}function i(f,m){let C=t(this.namespace+(typeof m>"u"?":":m)+f);return C.log=this.log,C}function r(f){t.save(f),t.namespaces=f,t.names=[],t.skips=[];let m,C=(typeof f=="string"?f:"").split(/[\s,]+/),O=C.length;for(m=0;m<O;m++)C[m]&&(f=C[m].replace(/\*/g,".*?"),f[0]==="-"?t.skips.push(new RegExp("^"+f.slice(1)+"$")):t.names.push(new RegExp("^"+f+"$")))}function o(){let f=[...t.names.map(d),...t.skips.map(d).map(m=>"-"+m)].join(",");return t.enable(""),f}function s(f){if(f[f.length-1]==="*")return!0;let m,C;for(m=0,C=t.skips.length;m<C;m++)if(t.skips[m].test(f))return!1;for(m=0,C=t.names.length;m<C;m++)if(t.names[m].test(f))return!0;return!1}function d(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack||f.message:f}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}qo.exports=Tl});var Ho=q((ue,Rn)=>{"use strict";ue.formatArgs=Pl;ue.save=Dl;ue.load=Fl;ue.useColors=Il;ue.storage=Al();ue.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ue.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Il(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Pl(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+Rn.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;n.splice(1,0,e,"color: inherit");let t=0,i=0;n[0].replace(/%[a-zA-Z%]/g,r=>{r!=="%%"&&(t++,r==="%c"&&(i=t))}),n.splice(i,0,e)}ue.log=console.debug||console.log||(()=>{});function Dl(n){try{n?ue.storage.setItem("debug",n):ue.storage.removeItem("debug")}catch{}}function Fl(){let n;try{n=ue.storage.getItem("debug")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=process.env.DEBUG),n}function Al(){try{return localStorage}catch{}}Rn.exports=Pi()(ue);var{formatters:Vl}=Rn.exports;Vl.j=function(n){try{return JSON.stringify(n)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Go=q((Bh,Wo)=>{"use strict";Wo.exports=(n,e)=>{e=e||process.argv;let t=n.startsWith("-")?"":n.length===1?"-":"--",i=e.indexOf(t+n),r=e.indexOf("--");return i!==-1&&(r===-1?!0:i<r)}});var zo=q((Uh,$o)=>{"use strict";var Rl=P("os"),xe=Go(),se=process.env,_t;xe("no-color")||xe("no-colors")||xe("color=false")?_t=!1:(xe("color")||xe("colors")||xe("color=true")||xe("color=always"))&&(_t=!0);"FORCE_COLOR"in se&&(_t=se.FORCE_COLOR.length===0||parseInt(se.FORCE_COLOR,10)!==0);function Nl(n){return n===0?!1:{level:n,hasBasic:!0,has256:n>=2,has16m:n>=3}}function Ll(n){if(_t===!1)return 0;if(xe("color=16m")||xe("color=full")||xe("color=truecolor"))return 3;if(xe("color=256"))return 2;if(n&&!n.isTTY&&_t!==!0)return 0;let e=_t?1:0;if(process.platform==="win32"){let t=Rl.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in se)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(t=>t in se)||se.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in se)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(se.TEAMCITY_VERSION)?1:0;if(se.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in se){let t=parseInt((se.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(se.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(se.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(se.TERM)||"COLORTERM"in se?1:(se.TERM==="dumb",e)}function Di(n){let e=Ll(n);return Nl(e)}$o.exports={supportsColor:Di,stdout:Di(process.stdout),stderr:Di(process.stderr)}});var Jo=q((X,Ln)=>{"use strict";var Bl=P("tty"),Nn=P("util");X.init=$l;X.log=Hl;X.formatArgs=jl;X.save=Wl;X.load=Gl;X.useColors=Ul;X.destroy=Nn.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");X.colors=[6,2,3,4,5,1];try{let n=zo();n&&(n.stderr||n).level>=2&&(X.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}X.inspectOpts=Object.keys(process.env).filter(n=>/^debug_/i.test(n)).reduce((n,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(r,o)=>o.toUpperCase()),i=process.env[e];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),n[t]=i,n},{});function Ul(){return"colors"in X.inspectOpts?!!X.inspectOpts.colors:Bl.isatty(process.stderr.fd)}function jl(n){let{namespace:e,useColors:t}=this;if(t){let i=this.color,r="\x1B[3"+(i<8?i:"8;5;"+i),o=`  ${r};1m${e} \x1B[0m`;n[0]=o+n[0].split(`
`).join(`
`+o),n.push(r+"m+"+Ln.exports.humanize(this.diff)+"\x1B[0m")}else n[0]=ql()+e+" "+n[0]}function ql(){return X.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Hl(...n){return process.stderr.write(Nn.formatWithOptions(X.inspectOpts,...n)+`
`)}function Wl(n){n?process.env.DEBUG=n:delete process.env.DEBUG}function Gl(){return process.env.DEBUG}function $l(n){n.inspectOpts={};let e=Object.keys(X.inspectOpts);for(let t=0;t<e.length;t++)n.inspectOpts[e[t]]=X.inspectOpts[e[t]]}Ln.exports=Pi()(X);var{formatters:Qo}=Ln.exports;Qo.o=function(n){return this.inspectOpts.colors=this.useColors,Nn.inspect(n,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Qo.O=function(n){return this.inspectOpts.colors=this.useColors,Nn.inspect(n,this.inspectOpts)}});var ye=q((jh,Fi)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Fi.exports=Ho():Fi.exports=Jo()});var os=q((lf,rs)=>{"use strict";var{Duplex:Kl}=P("stream");function ns(n){n.emit("close")}function Xl(){!this.destroyed&&this._writableState.finished&&this.destroy()}function is(n){this.removeListener("error",is),this.destroy(),this.listenerCount("error")===0&&this.emit("error",n)}function Zl(n,e){let t=!0,i=new Kl($(D({},e),{autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1}));return n.on("message",function(o,s){let d=!s&&i._readableState.objectMode?o.toString():o;i.push(d)||n.pause()}),n.once("error",function(o){i.destroyed||(t=!1,i.destroy(o))}),n.once("close",function(){i.destroyed||i.push(null)}),i._destroy=function(r,o){if(n.readyState===n.CLOSED){o(r),process.nextTick(ns,i);return}let s=!1;n.once("error",function(c){s=!0,o(c)}),n.once("close",function(){s||o(r),process.nextTick(ns,i)}),t&&n.terminate()},i._final=function(r){if(n.readyState===n.CONNECTING){n.once("open",function(){i._final(r)});return}n._socket!==null&&(n._socket._writableState.finished?(r(),i._readableState.endEmitted&&i.destroy()):(n._socket.once("finish",function(){r()}),n.close()))},i._read=function(){n.isPaused&&n.resume()},i._write=function(r,o,s){if(n.readyState===n.CONNECTING){n.once("open",function(){i._write(r,o,s)});return}n.send(r,s)},i.on("end",Xl),i.on("error",is),i}rs.exports=Zl});var $e=q((df,ss)=>{"use strict";ss.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Jt=q((uf,jn)=>{"use strict";var{EMPTY_BUFFER:ec}=$e(),Ri=Buffer[Symbol.species];function tc(n,e){if(n.length===0)return ec;if(n.length===1)return n[0];let t=Buffer.allocUnsafe(e),i=0;for(let r=0;r<n.length;r++){let o=n[r];t.set(o,i),i+=o.length}return i<e?new Ri(t.buffer,t.byteOffset,i):t}function as(n,e,t,i,r){for(let o=0;o<r;o++)t[i+o]=n[o]^e[o&3]}function ls(n,e){for(let t=0;t<n.length;t++)n[t]^=e[t&3]}function nc(n){return n.length===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.length)}function Ni(n){if(Ni.readOnly=!0,Buffer.isBuffer(n))return n;let e;return n instanceof ArrayBuffer?e=new Ri(n):ArrayBuffer.isView(n)?e=new Ri(n.buffer,n.byteOffset,n.byteLength):(e=Buffer.from(n),Ni.readOnly=!1),e}jn.exports={concat:tc,mask:as,toArrayBuffer:nc,toBuffer:Ni,unmask:ls};if(!process.env.WS_NO_BUFFER_UTIL)try{let n=P("bufferutil");jn.exports.mask=function(e,t,i,r,o){o<48?as(e,t,i,r,o):n.mask(e,t,i,r,o)},jn.exports.unmask=function(e,t){e.length<32?ls(e,t):n.unmask(e,t)}}catch{}});var us=q((hf,ds)=>{"use strict";var cs=Symbol("kDone"),Li=Symbol("kRun"),Bi=class{constructor(e){this[cs]=()=>{this.pending--,this[Li]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[Li]()}[Li](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[cs])}}};ds.exports=Bi});var Xt=q((ff,ms)=>{"use strict";var Yt=P("zlib"),hs=Jt(),ic=us(),{kStatusCode:fs}=$e(),rc=Buffer[Symbol.species],oc=Buffer.from([0,0,255,255]),Wn=Symbol("permessage-deflate"),Le=Symbol("total-length"),Kt=Symbol("callback"),ze=Symbol("buffers"),Hn=Symbol("error"),qn,Ui=class{constructor(e,t,i){if(this._maxPayload=i|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!qn){let r=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;qn=new ic(r)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Kt];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,i=e.find(r=>!(t.serverNoContextTakeover===!1&&r.server_no_context_takeover||r.server_max_window_bits&&(t.serverMaxWindowBits===!1||typeof t.serverMaxWindowBits=="number"&&t.serverMaxWindowBits>r.server_max_window_bits)||typeof t.clientMaxWindowBits=="number"&&!r.client_max_window_bits));if(!i)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(i.server_no_context_takeover=!0),t.clientNoContextTakeover&&(i.client_no_context_takeover=!0),typeof t.serverMaxWindowBits=="number"&&(i.server_max_window_bits=t.serverMaxWindowBits),typeof t.clientMaxWindowBits=="number"?i.client_max_window_bits=t.clientMaxWindowBits:(i.client_max_window_bits===!0||t.clientMaxWindowBits===!1)&&delete i.client_max_window_bits,i}acceptAsClient(e){let t=e[0];if(this._options.clientNoContextTakeover===!1&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!t.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(t.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return t}normalizeParams(e){return e.forEach(t=>{Object.keys(t).forEach(i=>{let r=t[i];if(r.length>1)throw new Error(`Parameter "${i}" must have only a single value`);if(r=r[0],i==="client_max_window_bits"){if(r!==!0){let o=+r;if(!Number.isInteger(o)||o<8||o>15)throw new TypeError(`Invalid value for parameter "${i}": ${r}`);r=o}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${i}": ${r}`)}else if(i==="server_max_window_bits"){let o=+r;if(!Number.isInteger(o)||o<8||o>15)throw new TypeError(`Invalid value for parameter "${i}": ${r}`);r=o}else if(i==="client_no_context_takeover"||i==="server_no_context_takeover"){if(r!==!0)throw new TypeError(`Invalid value for parameter "${i}": ${r}`)}else throw new Error(`Unknown parameter "${i}"`);t[i]=r})}),e}decompress(e,t,i){qn.add(r=>{this._decompress(e,t,(o,s)=>{r(),i(o,s)})})}compress(e,t,i){qn.add(r=>{this._compress(e,t,(o,s)=>{r(),i(o,s)})})}_decompress(e,t,i){let r=this._isServer?"client":"server";if(!this._inflate){let o=`${r}_max_window_bits`,s=typeof this.params[o]!="number"?Yt.Z_DEFAULT_WINDOWBITS:this.params[o];this._inflate=Yt.createInflateRaw($(D({},this._options.zlibInflateOptions),{windowBits:s})),this._inflate[Wn]=this,this._inflate[Le]=0,this._inflate[ze]=[],this._inflate.on("error",ac),this._inflate.on("data",ps)}this._inflate[Kt]=i,this._inflate.write(e),t&&this._inflate.write(oc),this._inflate.flush(()=>{let o=this._inflate[Hn];if(o){this._inflate.close(),this._inflate=null,i(o);return}let s=hs.concat(this._inflate[ze],this._inflate[Le]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[Le]=0,this._inflate[ze]=[],t&&this.params[`${r}_no_context_takeover`]&&this._inflate.reset()),i(null,s)})}_compress(e,t,i){let r=this._isServer?"server":"client";if(!this._deflate){let o=`${r}_max_window_bits`,s=typeof this.params[o]!="number"?Yt.Z_DEFAULT_WINDOWBITS:this.params[o];this._deflate=Yt.createDeflateRaw($(D({},this._options.zlibDeflateOptions),{windowBits:s})),this._deflate[Le]=0,this._deflate[ze]=[],this._deflate.on("data",sc)}this._deflate[Kt]=i,this._deflate.write(e),this._deflate.flush(Yt.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let o=hs.concat(this._deflate[ze],this._deflate[Le]);t&&(o=new rc(o.buffer,o.byteOffset,o.length-4)),this._deflate[Kt]=null,this._deflate[Le]=0,this._deflate[ze]=[],t&&this.params[`${r}_no_context_takeover`]&&this._deflate.reset(),i(null,o)})}};ms.exports=Ui;function sc(n){this[ze].push(n),this[Le]+=n.length}function ps(n){if(this[Le]+=n.length,this[Wn]._maxPayload<1||this[Le]<=this[Wn]._maxPayload){this[ze].push(n);return}this[Hn]=new RangeError("Max payload size exceeded"),this[Hn].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Hn][fs]=1009,this.removeListener("data",ps),this.reset()}function ac(n){this[Wn]._inflate=null,n[fs]=1007,this[Kt](n)}});var Zt=q((mf,Gn)=>{"use strict";var{isUtf8:gs}=P("buffer"),lc=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function cc(n){return n>=1e3&&n<=1014&&n!==1004&&n!==1005&&n!==1006||n>=3e3&&n<=4999}function ji(n){let e=n.length,t=0;for(;t<e;)if(!(n[t]&128))t++;else if((n[t]&224)===192){if(t+1===e||(n[t+1]&192)!==128||(n[t]&254)===192)return!1;t+=2}else if((n[t]&240)===224){if(t+2>=e||(n[t+1]&192)!==128||(n[t+2]&192)!==128||n[t]===224&&(n[t+1]&224)===128||n[t]===237&&(n[t+1]&224)===160)return!1;t+=3}else if((n[t]&248)===240){if(t+3>=e||(n[t+1]&192)!==128||(n[t+2]&192)!==128||(n[t+3]&192)!==128||n[t]===240&&(n[t+1]&240)===128||n[t]===244&&n[t+1]>143||n[t]>244)return!1;t+=4}else return!1;return!0}Gn.exports={isValidStatusCode:cc,isValidUTF8:ji,tokenChars:lc};if(gs)Gn.exports.isValidUTF8=function(n){return n.length<24?ji(n):gs(n)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let n=P("utf-8-validate");Gn.exports.isValidUTF8=function(e){return e.length<32?ji(e):n(e)}}catch{}});var $i=q((gf,ws)=>{"use strict";var{Writable:dc}=P("stream"),ys=Xt(),{BINARY_TYPES:uc,EMPTY_BUFFER:_s,kStatusCode:hc,kWebSocket:fc}=$e(),{concat:qi,toArrayBuffer:pc,unmask:mc}=Jt(),{isValidStatusCode:gc,isValidUTF8:vs}=Zt(),$n=Buffer[Symbol.species],_e=0,bs=1,Cs=2,xs=3,Hi=4,Wi=5,zn=6,Gi=class extends dc{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||uc[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[fc]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=_e}_write(e,t,i){if(this._opcode===8&&this._state==_e)return i();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(i)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let i=this._buffers[0];return this._buffers[0]=new $n(i.buffer,i.byteOffset+e,i.length-e),new $n(i.buffer,i.byteOffset,e)}let t=Buffer.allocUnsafe(e);do{let i=this._buffers[0],r=t.length-e;e>=i.length?t.set(this._buffers.shift(),r):(t.set(new Uint8Array(i.buffer,i.byteOffset,e),r),this._buffers[0]=new $n(i.buffer,i.byteOffset+e,i.length-e)),e-=i.length}while(e>0);return t}startLoop(e){this._loop=!0;do switch(this._state){case _e:this.getInfo(e);break;case bs:this.getPayloadLength16(e);break;case Cs:this.getPayloadLength64(e);break;case xs:this.getMask();break;case Hi:this.getData(e);break;case Wi:case zn:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let t=this.consume(2);if(t[0]&48){let r=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(r);return}let i=(t[0]&64)===64;if(i&&!this._extensions[ys.extensionName]){let r=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(r);return}if(this._fin=(t[0]&128)===128,this._opcode=t[0]&15,this._payloadLength=t[1]&127,this._opcode===0){if(i){let r=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(r);return}if(!this._fragmented){let r=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(r);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let r=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(r);return}this._compressed=i}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let r=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(r);return}if(i){let r=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(r);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let r=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(r);return}}else{let r=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(r);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(t[1]&128)===128,this._isServer){if(!this._masked){let r=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(r);return}}else if(this._masked){let r=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(r);return}this._payloadLength===126?this._state=bs:this._payloadLength===127?this._state=Cs:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let t=this.consume(8),i=t.readUInt32BE(0);if(i>Math.pow(2,21)-1){let r=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(r);return}this._payloadLength=i*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let t=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(t);return}this._masked?this._state=xs:this._state=Hi}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=Hi}getData(e){let t=_s;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&mc(t,this._mask)}if(this._opcode>7){this.controlMessage(t,e);return}if(this._compressed){this._state=Wi,this.decompress(t,e);return}t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}decompress(e,t){this._extensions[ys.extensionName].decompress(e,this._fin,(r,o)=>{if(r)return t(r);if(o.length){if(this._messageLength+=o.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let s=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");t(s);return}this._fragments.push(o)}this.dataMessage(t),this._state===_e&&this.startLoop(t)})}dataMessage(e){if(!this._fin){this._state=_e;return}let t=this._messageLength,i=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let r;this._binaryType==="nodebuffer"?r=qi(i,t):this._binaryType==="arraybuffer"?r=pc(qi(i,t)):r=i,this._allowSynchronousEvents?(this.emit("message",r,!0),this._state=_e):(this._state=zn,setImmediate(()=>{this.emit("message",r,!0),this._state=_e,this.startLoop(e)}))}else{let r=qi(i,t);if(!this._skipUTF8Validation&&!vs(r)){let o=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(o);return}this._state===Wi||this._allowSynchronousEvents?(this.emit("message",r,!1),this._state=_e):(this._state=zn,setImmediate(()=>{this.emit("message",r,!1),this._state=_e,this.startLoop(e)}))}}controlMessage(e,t){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,_s),this.end();else{let i=e.readUInt16BE(0);if(!gc(i)){let o=this.createError(RangeError,`invalid status code ${i}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");t(o);return}let r=new $n(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!vs(r)){let o=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");t(o);return}this._loop=!1,this.emit("conclude",i,r),this.end()}this._state=_e;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=_e):(this._state=zn,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=_e,this.startLoop(t)}))}createError(e,t,i,r,o){this._loop=!1,this._errored=!0;let s=new e(i?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(s,this.createError),s.code=o,s[hc]=r,s}};ws.exports=Gi});var Qi=q((_f,ks)=>{"use strict";var{Duplex:yf}=P("stream"),{randomFillSync:yc}=P("crypto"),Es=Xt(),{EMPTY_BUFFER:_c}=$e(),{isValidStatusCode:vc}=Zt(),{mask:Ss,toBuffer:bt}=Jt(),Ee=Symbol("kByteLength"),bc=Buffer.alloc(4),Qn=8*1024,tt,Ct=Qn,zi=class n{constructor(e,t,i){this._extensions=t||{},i&&(this._generateMask=i,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let i,r=!1,o=2,s=!1;t.mask&&(i=t.maskBuffer||bc,t.generateMask?t.generateMask(i):(Ct===Qn&&(tt===void 0&&(tt=Buffer.alloc(Qn)),yc(tt,0,Qn),Ct=0),i[0]=tt[Ct++],i[1]=tt[Ct++],i[2]=tt[Ct++],i[3]=tt[Ct++]),s=(i[0]|i[1]|i[2]|i[3])===0,o=6);let d;typeof e=="string"?(!t.mask||s)&&t[Ee]!==void 0?d=t[Ee]:(e=Buffer.from(e),d=e.length):(d=e.length,r=t.mask&&t.readOnly&&!s);let c=d;d>=65536?(o+=8,c=127):d>125&&(o+=2,c=126);let p=Buffer.allocUnsafe(r?d+o:o);return p[0]=t.fin?t.opcode|128:t.opcode,t.rsv1&&(p[0]|=64),p[1]=c,c===126?p.writeUInt16BE(d,2):c===127&&(p[2]=p[3]=0,p.writeUIntBE(d,4,6)),t.mask?(p[1]|=128,p[o-4]=i[0],p[o-3]=i[1],p[o-2]=i[2],p[o-1]=i[3],s?[p,e]:r?(Ss(e,i,p,o,d),[p]):(Ss(e,i,e,0,d),[p,e])):[p,e]}close(e,t,i,r){let o;if(e===void 0)o=_c;else{if(typeof e!="number"||!vc(e))throw new TypeError("First argument must be a valid error code number");if(t===void 0||!t.length)o=Buffer.allocUnsafe(2),o.writeUInt16BE(e,0);else{let d=Buffer.byteLength(t);if(d>123)throw new RangeError("The message must not be greater than 123 bytes");o=Buffer.allocUnsafe(2+d),o.writeUInt16BE(e,0),typeof t=="string"?o.write(t,2):o.set(t,2)}}let s={[Ee]:o.length,fin:!0,generateMask:this._generateMask,mask:i,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,o,!1,s,r]):this.sendFrame(n.frame(o,s),r)}ping(e,t,i){let r,o;if(typeof e=="string"?(r=Buffer.byteLength(e),o=!1):(e=bt(e),r=e.length,o=bt.readOnly),r>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[Ee]:r,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:o,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,s,i]):this.sendFrame(n.frame(e,s),i)}pong(e,t,i){let r,o;if(typeof e=="string"?(r=Buffer.byteLength(e),o=!1):(e=bt(e),r=e.length,o=bt.readOnly),r>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[Ee]:r,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:o,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,s,i]):this.sendFrame(n.frame(e,s),i)}send(e,t,i){let r=this._extensions[Es.extensionName],o=t.binary?2:1,s=t.compress,d,c;if(typeof e=="string"?(d=Buffer.byteLength(e),c=!1):(e=bt(e),d=e.length,c=bt.readOnly),this._firstFragment?(this._firstFragment=!1,s&&r&&r.params[r._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(s=d>=r._threshold),this._compress=s):(s=!1,o=0),t.fin&&(this._firstFragment=!0),r){let p={[Ee]:d,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:c,rsv1:s};this._deflating?this.enqueue([this.dispatch,e,this._compress,p,i]):this.dispatch(e,this._compress,p,i)}else this.sendFrame(n.frame(e,{[Ee]:d,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:c,rsv1:!1}),i)}dispatch(e,t,i,r){if(!t){this.sendFrame(n.frame(e,i),r);return}let o=this._extensions[Es.extensionName];this._bufferedBytes+=i[Ee],this._deflating=!0,o.compress(e,i.fin,(s,d)=>{if(this._socket.destroyed){let c=new Error("The socket was closed while data was being compressed");typeof r=="function"&&r(c);for(let p=0;p<this._queue.length;p++){let f=this._queue[p],m=f[f.length-1];typeof m=="function"&&m(c)}return}this._bufferedBytes-=i[Ee],this._deflating=!1,i.readOnly=!1,this.sendFrame(n.frame(d,i),r),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Ee],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Ee],this._queue.push(e)}sendFrame(e,t){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}};ks.exports=zi});var Vs=q((vf,As)=>{"use strict";var{kForOnEventAttribute:en,kListener:Ji}=$e(),Os=Symbol("kCode"),Ms=Symbol("kData"),Ts=Symbol("kError"),Is=Symbol("kMessage"),Ps=Symbol("kReason"),xt=Symbol("kTarget"),Ds=Symbol("kType"),Fs=Symbol("kWasClean"),Be=class{constructor(e){this[xt]=null,this[Ds]=e}get target(){return this[xt]}get type(){return this[Ds]}};Object.defineProperty(Be.prototype,"target",{enumerable:!0});Object.defineProperty(Be.prototype,"type",{enumerable:!0});var nt=class extends Be{constructor(e,t={}){super(e),this[Os]=t.code===void 0?0:t.code,this[Ps]=t.reason===void 0?"":t.reason,this[Fs]=t.wasClean===void 0?!1:t.wasClean}get code(){return this[Os]}get reason(){return this[Ps]}get wasClean(){return this[Fs]}};Object.defineProperty(nt.prototype,"code",{enumerable:!0});Object.defineProperty(nt.prototype,"reason",{enumerable:!0});Object.defineProperty(nt.prototype,"wasClean",{enumerable:!0});var wt=class extends Be{constructor(e,t={}){super(e),this[Ts]=t.error===void 0?null:t.error,this[Is]=t.message===void 0?"":t.message}get error(){return this[Ts]}get message(){return this[Is]}};Object.defineProperty(wt.prototype,"error",{enumerable:!0});Object.defineProperty(wt.prototype,"message",{enumerable:!0});var tn=class extends Be{constructor(e,t={}){super(e),this[Ms]=t.data===void 0?null:t.data}get data(){return this[Ms]}};Object.defineProperty(tn.prototype,"data",{enumerable:!0});var Cc={addEventListener(n,e,t={}){for(let r of this.listeners(n))if(!t[en]&&r[Ji]===e&&!r[en])return;let i;if(n==="message")i=function(o,s){let d=new tn("message",{data:s?o:o.toString()});d[xt]=this,Jn(e,this,d)};else if(n==="close")i=function(o,s){let d=new nt("close",{code:o,reason:s.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});d[xt]=this,Jn(e,this,d)};else if(n==="error")i=function(o){let s=new wt("error",{error:o,message:o.message});s[xt]=this,Jn(e,this,s)};else if(n==="open")i=function(){let o=new Be("open");o[xt]=this,Jn(e,this,o)};else return;i[en]=!!t[en],i[Ji]=e,t.once?this.once(n,i):this.on(n,i)},removeEventListener(n,e){for(let t of this.listeners(n))if(t[Ji]===e&&!t[en]){this.removeListener(n,t);break}}};As.exports={CloseEvent:nt,ErrorEvent:wt,Event:Be,EventTarget:Cc,MessageEvent:tn};function Jn(n,e,t){typeof n=="object"&&n.handleEvent?n.handleEvent.call(n,t):n.call(e,t)}});var Yi=q((bf,Rs)=>{"use strict";var{tokenChars:nn}=Zt();function Pe(n,e,t){n[e]===void 0?n[e]=[t]:n[e].push(t)}function xc(n){let e=Object.create(null),t=Object.create(null),i=!1,r=!1,o=!1,s,d,c=-1,p=-1,f=-1,m=0;for(;m<n.length;m++)if(p=n.charCodeAt(m),s===void 0)if(f===-1&&nn[p]===1)c===-1&&(c=m);else if(m!==0&&(p===32||p===9))f===-1&&c!==-1&&(f=m);else if(p===59||p===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${m}`);f===-1&&(f=m);let O=n.slice(c,f);p===44?(Pe(e,O,t),t=Object.create(null)):s=O,c=f=-1}else throw new SyntaxError(`Unexpected character at index ${m}`);else if(d===void 0)if(f===-1&&nn[p]===1)c===-1&&(c=m);else if(p===32||p===9)f===-1&&c!==-1&&(f=m);else if(p===59||p===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${m}`);f===-1&&(f=m),Pe(t,n.slice(c,f),!0),p===44&&(Pe(e,s,t),t=Object.create(null),s=void 0),c=f=-1}else if(p===61&&c!==-1&&f===-1)d=n.slice(c,m),c=f=-1;else throw new SyntaxError(`Unexpected character at index ${m}`);else if(r){if(nn[p]!==1)throw new SyntaxError(`Unexpected character at index ${m}`);c===-1?c=m:i||(i=!0),r=!1}else if(o)if(nn[p]===1)c===-1&&(c=m);else if(p===34&&c!==-1)o=!1,f=m;else if(p===92)r=!0;else throw new SyntaxError(`Unexpected character at index ${m}`);else if(p===34&&n.charCodeAt(m-1)===61)o=!0;else if(f===-1&&nn[p]===1)c===-1&&(c=m);else if(c!==-1&&(p===32||p===9))f===-1&&(f=m);else if(p===59||p===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${m}`);f===-1&&(f=m);let O=n.slice(c,f);i&&(O=O.replace(/\\/g,""),i=!1),Pe(t,d,O),p===44&&(Pe(e,s,t),t=Object.create(null),s=void 0),d=void 0,c=f=-1}else throw new SyntaxError(`Unexpected character at index ${m}`);if(c===-1||o||p===32||p===9)throw new SyntaxError("Unexpected end of input");f===-1&&(f=m);let C=n.slice(c,f);return s===void 0?Pe(e,C,t):(d===void 0?Pe(t,C,!0):i?Pe(t,d,C.replace(/\\/g,"")):Pe(t,d,C),Pe(e,s,t)),e}function wc(n){return Object.keys(n).map(e=>{let t=n[e];return Array.isArray(t)||(t=[t]),t.map(i=>[e].concat(Object.keys(i).map(r=>{let o=i[r];return Array.isArray(o)||(o=[o]),o.map(s=>s===!0?r:`${r}=${s}`).join("; ")})).join("; ")).join(", ")}).join(", ")}Rs.exports={format:wc,parse:xc}});var tr=q((wf,zs)=>{"use strict";var Ec=P("events"),Sc=P("https"),kc=P("http"),Bs=P("net"),Oc=P("tls"),{randomBytes:Mc,createHash:Tc}=P("crypto"),{Duplex:Cf,Readable:xf}=P("stream"),{URL:Ki}=P("url"),Qe=Xt(),Ic=$i(),Pc=Qi(),{BINARY_TYPES:Ns,EMPTY_BUFFER:Yn,GUID:Dc,kForOnEventAttribute:Xi,kListener:Fc,kStatusCode:Ac,kWebSocket:ae,NOOP:Us}=$e(),{EventTarget:{addEventListener:Vc,removeEventListener:Rc}}=Vs(),{format:Nc,parse:Lc}=Yi(),{toBuffer:Bc}=Jt(),Uc=30*1e3,js=Symbol("kAborted"),Zi=[8,13],Ue=["CONNECTING","OPEN","CLOSING","CLOSED"],jc=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,W=class n extends Ec{constructor(e,t,i){super(),this._binaryType=Ns[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=Yn,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=n.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,t===void 0?t=[]:Array.isArray(t)||(typeof t=="object"&&t!==null?(i=t,t=[]):t=[t]),qs(this,e,t,i)):(this._autoPong=i.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){Ns.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,i){let r=new Ic({allowSynchronousEvents:i.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation});this._sender=new Pc(e,this._extensions,i.generateMask),this._receiver=r,this._socket=e,r[ae]=this,e[ae]=this,r.on("conclude",Wc),r.on("drain",Gc),r.on("error",$c),r.on("message",zc),r.on("ping",Qc),r.on("pong",Jc),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",Ws),e.on("data",Xn),e.on("end",Gs),e.on("error",$s),this._readyState=n.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=n.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[Qe.extensionName]&&this._extensions[Qe.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=n.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==n.CLOSED){if(this.readyState===n.CONNECTING){he(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===n.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=n.CLOSING,this._sender.close(e,t,!this._isServer,i=>{i||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),Uc)}}pause(){this.readyState===n.CONNECTING||this.readyState===n.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,t,i){if(this.readyState===n.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(i=e,e=t=void 0):typeof t=="function"&&(i=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==n.OPEN){er(this,e,i);return}t===void 0&&(t=!this._isServer),this._sender.ping(e||Yn,t,i)}pong(e,t,i){if(this.readyState===n.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(i=e,e=t=void 0):typeof t=="function"&&(i=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==n.OPEN){er(this,e,i);return}t===void 0&&(t=!this._isServer),this._sender.pong(e||Yn,t,i)}resume(){this.readyState===n.CONNECTING||this.readyState===n.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,i){if(this.readyState===n.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"&&(i=t,t={}),typeof e=="number"&&(e=e.toString()),this.readyState!==n.OPEN){er(this,e,i);return}let r=D({binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[Qe.extensionName]||(r.compress=!1),this._sender.send(e||Yn,r,i)}terminate(){if(this.readyState!==n.CLOSED){if(this.readyState===n.CONNECTING){he(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=n.CLOSING,this._socket.destroy())}}};Object.defineProperty(W,"CONNECTING",{enumerable:!0,value:Ue.indexOf("CONNECTING")});Object.defineProperty(W.prototype,"CONNECTING",{enumerable:!0,value:Ue.indexOf("CONNECTING")});Object.defineProperty(W,"OPEN",{enumerable:!0,value:Ue.indexOf("OPEN")});Object.defineProperty(W.prototype,"OPEN",{enumerable:!0,value:Ue.indexOf("OPEN")});Object.defineProperty(W,"CLOSING",{enumerable:!0,value:Ue.indexOf("CLOSING")});Object.defineProperty(W.prototype,"CLOSING",{enumerable:!0,value:Ue.indexOf("CLOSING")});Object.defineProperty(W,"CLOSED",{enumerable:!0,value:Ue.indexOf("CLOSED")});Object.defineProperty(W.prototype,"CLOSED",{enumerable:!0,value:Ue.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(n=>{Object.defineProperty(W.prototype,n,{enumerable:!0})});["open","error","close","message"].forEach(n=>{Object.defineProperty(W.prototype,`on${n}`,{enumerable:!0,get(){for(let e of this.listeners(n))if(e[Xi])return e[Fc];return null},set(e){for(let t of this.listeners(n))if(t[Xi]){this.removeListener(n,t);break}typeof e=="function"&&this.addEventListener(n,e,{[Xi]:!0})}})});W.prototype.addEventListener=Vc;W.prototype.removeEventListener=Rc;zs.exports=W;function qs(n,e,t,i){let r=$(D({allowSynchronousEvents:!0,autoPong:!0,protocolVersion:Zi[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10},i),{socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0});if(n._autoPong=r.autoPong,!Zi.includes(r.protocolVersion))throw new RangeError(`Unsupported protocol version: ${r.protocolVersion} (supported versions: ${Zi.join(", ")})`);let o;if(e instanceof Ki)o=e;else try{o=new Ki(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}o.protocol==="http:"?o.protocol="ws:":o.protocol==="https:"&&(o.protocol="wss:"),n._url=o.href;let s=o.protocol==="wss:",d=o.protocol==="ws+unix:",c;if(o.protocol!=="ws:"&&!s&&!d?c=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:d&&!o.pathname?c="The URL's pathname is empty":o.hash&&(c="The URL contains a fragment identifier"),c){let w=new SyntaxError(c);if(n._redirects===0)throw w;Kn(n,w);return}let p=s?443:80,f=Mc(16).toString("base64"),m=s?Sc.request:kc.request,C=new Set,O;if(r.createConnection=r.createConnection||(s?Hc:qc),r.defaultPort=r.defaultPort||p,r.port=o.port||p,r.host=o.hostname.startsWith("[")?o.hostname.slice(1,-1):o.hostname,r.headers=$(D({},r.headers),{"Sec-WebSocket-Version":r.protocolVersion,"Sec-WebSocket-Key":f,Connection:"Upgrade",Upgrade:"websocket"}),r.path=o.pathname+o.search,r.timeout=r.handshakeTimeout,r.perMessageDeflate&&(O=new Qe(r.perMessageDeflate!==!0?r.perMessageDeflate:{},!1,r.maxPayload),r.headers["Sec-WebSocket-Extensions"]=Nc({[Qe.extensionName]:O.offer()})),t.length){for(let w of t){if(typeof w!="string"||!jc.test(w)||C.has(w))throw new SyntaxError("An invalid or duplicated subprotocol was specified");C.add(w)}r.headers["Sec-WebSocket-Protocol"]=t.join(",")}if(r.origin&&(r.protocolVersion<13?r.headers["Sec-WebSocket-Origin"]=r.origin:r.headers.Origin=r.origin),(o.username||o.password)&&(r.auth=`${o.username}:${o.password}`),d){let w=r.path.split(":");r.socketPath=w[0],r.path=w[1]}let I;if(r.followRedirects){if(n._redirects===0){n._originalIpc=d,n._originalSecure=s,n._originalHostOrSocketPath=d?r.socketPath:o.host;let w=i&&i.headers;if(i=$(D({},i),{headers:{}}),w)for(let[M,te]of Object.entries(w))i.headers[M.toLowerCase()]=te}else if(n.listenerCount("redirect")===0){let w=d?n._originalIpc?r.socketPath===n._originalHostOrSocketPath:!1:n._originalIpc?!1:o.host===n._originalHostOrSocketPath;(!w||n._originalSecure&&!s)&&(delete r.headers.authorization,delete r.headers.cookie,w||delete r.headers.host,r.auth=void 0)}r.auth&&!i.headers.authorization&&(i.headers.authorization="Basic "+Buffer.from(r.auth).toString("base64")),I=n._req=m(r),n._redirects&&n.emit("redirect",n.url,I)}else I=n._req=m(r);r.timeout&&I.on("timeout",()=>{he(n,I,"Opening handshake has timed out")}),I.on("error",w=>{I===null||I[js]||(I=n._req=null,Kn(n,w))}),I.on("response",w=>{let M=w.headers.location,te=w.statusCode;if(M&&r.followRedirects&&te>=300&&te<400){if(++n._redirects>r.maxRedirects){he(n,I,"Maximum redirects exceeded");return}I.abort();let G;try{G=new Ki(M,e)}catch{let S=new SyntaxError(`Invalid URL: ${M}`);Kn(n,S);return}qs(n,G,t,i)}else n.emit("unexpected-response",I,w)||he(n,I,`Unexpected server response: ${w.statusCode}`)}),I.on("upgrade",(w,M,te)=>{if(n.emit("upgrade",w),n.readyState!==W.CONNECTING)return;I=n._req=null;let G=w.headers.upgrade;if(G===void 0||G.toLowerCase()!=="websocket"){he(n,M,"Invalid Upgrade header");return}let v=Tc("sha1").update(f+Dc).digest("base64");if(w.headers["sec-websocket-accept"]!==v){he(n,M,"Invalid Sec-WebSocket-Accept header");return}let S=w.headers["sec-websocket-protocol"],ne;if(S!==void 0?C.size?C.has(S)||(ne="Server sent an invalid subprotocol"):ne="Server sent a subprotocol but none was requested":C.size&&(ne="Server sent no subprotocol"),ne){he(n,M,ne);return}S&&(n._protocol=S);let Q=w.headers["sec-websocket-extensions"];if(Q!==void 0){if(!O){he(n,M,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let de;try{de=Lc(Q)}catch{he(n,M,"Invalid Sec-WebSocket-Extensions header");return}let De=Object.keys(de);if(De.length!==1||De[0]!==Qe.extensionName){he(n,M,"Server indicated an extension that was not requested");return}try{O.accept(de[Qe.extensionName])}catch{he(n,M,"Invalid Sec-WebSocket-Extensions header");return}n._extensions[Qe.extensionName]=O}n.setSocket(M,te,{allowSynchronousEvents:r.allowSynchronousEvents,generateMask:r.generateMask,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation})}),r.finishRequest?r.finishRequest(I,n):I.end()}function Kn(n,e){n._readyState=W.CLOSING,n.emit("error",e),n.emitClose()}function qc(n){return n.path=n.socketPath,Bs.connect(n)}function Hc(n){return n.path=void 0,!n.servername&&n.servername!==""&&(n.servername=Bs.isIP(n.host)?"":n.host),Oc.connect(n)}function he(n,e,t){n._readyState=W.CLOSING;let i=new Error(t);Error.captureStackTrace(i,he),e.setHeader?(e[js]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(Kn,n,i)):(e.destroy(i),e.once("error",n.emit.bind(n,"error")),e.once("close",n.emitClose.bind(n)))}function er(n,e,t){if(e){let i=Bc(e).length;n._socket?n._sender._bufferedBytes+=i:n._bufferedAmount+=i}if(t){let i=new Error(`WebSocket is not open: readyState ${n.readyState} (${Ue[n.readyState]})`);process.nextTick(t,i)}}function Wc(n,e){let t=this[ae];t._closeFrameReceived=!0,t._closeMessage=e,t._closeCode=n,t._socket[ae]!==void 0&&(t._socket.removeListener("data",Xn),process.nextTick(Hs,t._socket),n===1005?t.close():t.close(n,e))}function Gc(){let n=this[ae];n.isPaused||n._socket.resume()}function $c(n){let e=this[ae];e._socket[ae]!==void 0&&(e._socket.removeListener("data",Xn),process.nextTick(Hs,e._socket),e.close(n[Ac])),e.emit("error",n)}function Ls(){this[ae].emitClose()}function zc(n,e){this[ae].emit("message",n,e)}function Qc(n){let e=this[ae];e._autoPong&&e.pong(n,!this._isServer,Us),e.emit("ping",n)}function Jc(n){this[ae].emit("pong",n)}function Hs(n){n.resume()}function Ws(){let n=this[ae];this.removeListener("close",Ws),this.removeListener("data",Xn),this.removeListener("end",Gs),n._readyState=W.CLOSING;let e;!this._readableState.endEmitted&&!n._closeFrameReceived&&!n._receiver._writableState.errorEmitted&&(e=n._socket.read())!==null&&n._receiver.write(e),n._receiver.end(),this[ae]=void 0,clearTimeout(n._closeTimer),n._receiver._writableState.finished||n._receiver._writableState.errorEmitted?n.emitClose():(n._receiver.on("error",Ls),n._receiver.on("finish",Ls))}function Xn(n){this[ae]._receiver.write(n)||this.pause()}function Gs(){let n=this[ae];n._readyState=W.CLOSING,n._receiver.end(),this.end()}function $s(){let n=this[ae];this.removeListener("error",$s),this.on("error",Us),n&&(n._readyState=W.CLOSING,this.destroy())}});var Js=q((Sf,Qs)=>{"use strict";var{tokenChars:Yc}=Zt();function Kc(n){let e=new Set,t=-1,i=-1,r=0;for(r;r<n.length;r++){let s=n.charCodeAt(r);if(i===-1&&Yc[s]===1)t===-1&&(t=r);else if(r!==0&&(s===32||s===9))i===-1&&t!==-1&&(i=r);else if(s===44){if(t===-1)throw new SyntaxError(`Unexpected character at index ${r}`);i===-1&&(i=r);let d=n.slice(t,i);if(e.has(d))throw new SyntaxError(`The "${d}" subprotocol is duplicated`);e.add(d),t=i=-1}else throw new SyntaxError(`Unexpected character at index ${r}`)}if(t===-1||i!==-1)throw new SyntaxError("Unexpected end of input");let o=n.slice(t,r);if(e.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);return e.add(o),e}Qs.exports={parse:Kc}});var na=q((Of,ta)=>{"use strict";var Xc=P("events"),Zn=P("http"),{Duplex:kf}=P("stream"),{createHash:Zc}=P("crypto"),Ys=Yi(),it=Xt(),ed=Js(),td=tr(),{GUID:nd,kWebSocket:id}=$e(),rd=/^[+/0-9A-Za-z]{22}==$/,Ks=0,Xs=1,ea=2,nr=class extends Xc{constructor(e,t){if(super(),e=D({allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:td},e),e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=Zn.createServer((i,r)=>{let o=Zn.STATUS_CODES[426];r.writeHead(426,{"Content-Length":o.length,"Content-Type":"text/plain"}),r.end(o)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let i=this.emit.bind(this,"connection");this._removeListeners=od(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(r,o,s)=>{this.handleUpgrade(r,o,s,i)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=Ks}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===ea){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(rn,this);return}if(e&&this.once("close",e),this._state!==Xs)if(this._state=Xs,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(rn,this):process.nextTick(rn,this);else{let t=this._server;this._removeListeners(),this._removeListeners=this._server=null,t.close(()=>{rn(this)})}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((t!==-1?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,i,r){t.on("error",Zs);let o=e.headers["sec-websocket-key"],s=e.headers.upgrade,d=+e.headers["sec-websocket-version"];if(e.method!=="GET"){rt(this,e,t,405,"Invalid HTTP method");return}if(s===void 0||s.toLowerCase()!=="websocket"){rt(this,e,t,400,"Invalid Upgrade header");return}if(o===void 0||!rd.test(o)){rt(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");return}if(d!==8&&d!==13){rt(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){on(t,400);return}let c=e.headers["sec-websocket-protocol"],p=new Set;if(c!==void 0)try{p=ed.parse(c)}catch{rt(this,e,t,400,"Invalid Sec-WebSocket-Protocol header");return}let f=e.headers["sec-websocket-extensions"],m={};if(this.options.perMessageDeflate&&f!==void 0){let C=new it(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let O=Ys.parse(f);O[it.extensionName]&&(C.accept(O[it.extensionName]),m[it.extensionName]=C)}catch{rt(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let C={origin:e.headers[`${d===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(C,(O,I,w,M)=>{if(!O)return on(t,I||401,w,M);this.completeUpgrade(m,o,p,e,t,i,r)});return}if(!this.options.verifyClient(C))return on(t,401)}this.completeUpgrade(m,o,p,e,t,i,r)}completeUpgrade(e,t,i,r,o,s,d){if(!o.readable||!o.writable)return o.destroy();if(o[id])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>Ks)return on(o,503);let p=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${Zc("sha1").update(t+nd).digest("base64")}`],f=new this.options.WebSocket(null,void 0,this.options);if(i.size){let m=this.options.handleProtocols?this.options.handleProtocols(i,r):i.values().next().value;m&&(p.push(`Sec-WebSocket-Protocol: ${m}`),f._protocol=m)}if(e[it.extensionName]){let m=e[it.extensionName].params,C=Ys.format({[it.extensionName]:[m]});p.push(`Sec-WebSocket-Extensions: ${C}`),f._extensions=e}this.emit("headers",p,r),o.write(p.concat(`\r
`).join(`\r
`)),o.removeListener("error",Zs),f.setSocket(o,s,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(f),f.on("close",()=>{this.clients.delete(f),this._shouldEmitClose&&!this.clients.size&&process.nextTick(rn,this)})),d(f,r)}};ta.exports=nr;function od(n,e){for(let t of Object.keys(e))n.on(t,e[t]);return function(){for(let i of Object.keys(e))n.removeListener(i,e[i])}}function rn(n){n._state=ea,n.emit("close")}function Zs(){this.destroy()}function on(n,e,t,i){t=t||Zn.STATUS_CODES[e],i=D({Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(t)},i),n.once("finish",n.destroy),n.end(`HTTP/1.1 ${e} ${Zn.STATUS_CODES[e]}\r
`+Object.keys(i).map(r=>`${r}: ${i[r]}`).join(`\r
`)+`\r
\r
`+t)}function rt(n,e,t,i,r){if(n.listenerCount("wsClientError")){let o=new Error(r);Error.captureStackTrace(o,rt),n.emit("wsClientError",o,t,e)}else on(t,i,r)}});var R={production:!1,googleMaps_api_key:"AIzaSyDbzLtJqttwnCZpCkzS7iaxLRN2kjcr8n8",google_Oauth2_key:"490153988551-ennqdrg2knoqj3rm1encr5vq0f7tlh50.apps.googleusercontent.com",backendURL:"http://localhost:3000"};var _n=(()=>{let e=class e{constructor(){this.credentialResponseObject=new fn(null)}initilizeGoogleAuth(){google.accounts.id.initialize({client_id:R.google_Oauth2_key,callback:i=>this.handleCredentialResponse(i)})}renderGoogleBtn(i){let r=document.getElementById(i);r?google.accounts.id.renderButton(r,{theme:"filled_black",size:"large",shape:"pill",width:350}):console.log("google btn element not found")}handleCredentialResponse(i){console.log("Google credential response: ",i),this.credentialResponseObject.next(i),this.credentialResponseObject.next(null)}getCredentialResponse(){return this.credentialResponseObject.asObservable()}signOut(){google.accounts.id.disableAutoSelect(),this.credentialResponseObject.next(null),console.log("Logged out")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Dt({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var $r=(()=>{let e=class e{constructor(i,r,o,s){this.platformId=i,this.http=r,this.router=o,this.gooogleAuthService=s}ngOnInit(){Me(this.platformId)&&(window.OpenListingForm=this.OpenListingForm.bind(this))}ngOnDestroy(){this.credentialSubscription&&this.credentialSubscription.unsubscribe()}ngAfterViewInit(){this.initGoogleServices()}initGoogleServices(){this.gooogleAuthService.initilizeGoogleAuth(),this.gooogleAuthService.renderGoogleBtn("googlebtn"),this.credentialSubscription=this.gooogleAuthService.getCredentialResponse().subscribe(i=>{i&&(console.log("Received credentiuals in the ccomponent:",i),this.sendCredentialsToBackend(i))})}sendCredentialsToBackend(i){console.log("sin in attempt initiated: to back end the log in details!"),console.log("sign in attemp initiated! *****************************************");let r=i.credential;this.http.post(`${R.backendURL}/login`,{auth_token:r},{withCredentials:!0}).subscribe({next:o=>{o.success?(alert(o.message),this.router.navigateByUrl(o.redirectUrl)):console.log("unexpected json format! ",o)},error:o=>{console.error("Error: ",o)}})}OpenListingForm(i){console.log("Listing form requested!"),this.router.navigateByUrl("/listing-form")}};e.\u0275fac=function(r){return new(r||e)(x(ke),x(me),x(ge),x(_n))},e.\u0275cmp=ie({type:e,selectors:[["app-log-in"]],standalone:!0,features:[oe],decls:13,vars:0,consts:[[1,"logSection"],[1,"logo"],["src","http://localhost:3000/uploads/MainLogo22.png","alt","Logo",1,"logoimg"],[1,"btns"],["href","#",1,"cta"],[3,"click"],[1,"divider"],[1,"line"],["id","googlebtn"]],template:function(r,o){r&1&&(a(0,"div",0)(1,"div",1),g(2,"img",2),l(),a(3,"div",3)(4,"div",4)(5,"button",5),E("click",function(){return o.OpenListingForm("Open Listing Form!")}),u(6,"List a restaurant"),l()(),a(7,"div",6),g(8,"div",7),a(9,"p"),u(10,"or"),l(),g(11,"div",7),l(),g(12,"div",8),l()())},dependencies:[pe],styles:['@font-face{font-family:Montserrat;font-style:italic;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUQjIg1_i6t8kCHKm459WxRxC7mw9c.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:italic;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUQjIg1_i6t8kCHKm459WxRzS7mw9c.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:italic;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUQjIg1_i6t8kCHKm459WxRxi7mw9c.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:italic;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUQjIg1_i6t8kCHKm459WxRxy7mw9c.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:italic;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUQjIg1_i6t8kCHKm459WxRyS7m.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v29/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.body[_ngcontent-%COMP%]{background-color:#e5e8e2}.logSection[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;height:100vh;width:100vh;background-color:#e5e8e2}.logo[_ngcontent-%COMP%]{margin-top:10%;margin-bottom:5%;width:55%;height:55%;display:flex;flex-direction:column;justify-content:center}.logoText[_ngcontent-%COMP%]{display:flex;align-items:center}.logoH[_ngcontent-%COMP%]{font-size:10vh}.btns[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;text-align:center;width:100%}.line[_ngcontent-%COMP%]{flex-grow:1;height:1px;background-color:#000;margin:0 10px}.cta[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{padding:9px 25px;color:#fff;width:100%;background-color:#334625;border:none;border-radius:50px;cursor:pointer;transition:all .3s ease 0s;font-family:Montserrat,sans-serif;font-weight:500;font-size:16px}button[_ngcontent-%COMP%]:hover{background-color:#9ebb8d;color:#000}.logoContainer[_ngcontent-%COMP%]{width:70%;height:50%}.logoimg[_ngcontent-%COMP%]{height:100%;object-fit:contain}']});let n=e;return n})();var zr=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ie({type:e,selectors:[["app-error"]],standalone:!0,features:[oe],decls:2,vars:0,template:function(r,o){r&1&&(a(0,"p"),u(1,"Error Signing in!"),l())}});let n=e;return n})();var Qr=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ie({type:e,selectors:[["app-root"]],standalone:!0,features:[oe],decls:1,vars:0,template:function(r,o){r&1&&g(0,"router-outlet")},dependencies:[Hr]});let n=e;return n})();var ro=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(x(Fe),x(Ke))},e.\u0275dir=re({type:e});let n=e;return n})(),kn=(()=>{let e=class e extends ro{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=ct(e)))(o||e)}})(),e.\u0275dir=re({type:e,features:[be]});let n=e;return n})(),qt=new lt(""),Va={provide:qt,useExisting:qe(()=>_i),multi:!0},_i=(()=>{let e=class e extends kn{writeValue(i){this.setProperty("checked",i)}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=ct(e)))(o||e)}})(),e.\u0275dir=re({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,o){r&1&&E("change",function(d){return o.onChange(d.target.checked)})("blur",function(){return o.onTouched()})},features:[He([Va]),be]});let n=e;return n})(),Ra={provide:qt,useExisting:qe(()=>On),multi:!0};function Na(){let n=gi()?gi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var La=new lt(""),On=(()=>{let e=class e extends ro{constructor(i,r,o){super(i,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Na())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(x(Fe),x(Ke),x(La,8))},e.\u0275dir=re({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&E("input",function(d){return o._handleInput(d.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(d){return o._compositionEnd(d.target.value)})},features:[He([Ra]),be]});let n=e;return n})();function Ba(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var vi=new lt(""),oo=new lt("");function Ua(n){return Ba(n.value)?{required:!0}:null}function Jr(n){return null}function so(n){return n!=null}function ao(n){return Tr(n)?mr(n):n}function lo(n){let e={};return n.forEach(t=>{e=t!=null?D(D({},e),t):e}),Object.keys(e).length===0?null:e}function co(n,e){return e.map(t=>t(n))}function ja(n){return!n.validate}function uo(n){return n.map(e=>ja(e)?e:t=>e.validate(t))}function qa(n){if(!n)return null;let e=n.filter(so);return e.length==0?null:function(t){return lo(co(t,e))}}function bi(n){return n!=null?qa(uo(n)):null}function Ha(n){if(!n)return null;let e=n.filter(so);return e.length==0?null:function(t){let i=co(t,e).map(ao);return yr(i).pipe(gr(lo))}}function Ci(n){return n!=null?Ha(uo(n)):null}function Yr(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Wa(n){return n._rawValidators}function Ga(n){return n._rawAsyncValidators}function yi(n){return n?Array.isArray(n)?n:[n]:[]}function bn(n,e){return Array.isArray(n)?n.includes(e):n===e}function Kr(n,e){let t=yi(e);return yi(n).forEach(r=>{bn(t,r)||t.push(r)}),t}function Xr(n,e){return yi(e).filter(t=>!bn(n,t))}var Cn=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=bi(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ci(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ht=class extends Cn{get formDirective(){return null}get path(){return null}},jt=class extends Cn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},xn=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},$a={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},vh=$(D({},$a),{"[class.ng-submitted]":"isSubmitted"}),ho=(()=>{let e=class e extends xn{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(x(jt,2))},e.\u0275dir=re({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&fi("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[be]});let n=e;return n})(),Mn=(()=>{let e=class e extends xn{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(x(ht,10))},e.\u0275dir=re({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&fi("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[be]});let n=e;return n})();var Rt="VALID",vn="INVALID",dt="PENDING",Nt="DISABLED",ft=class{},wn=class extends ft{constructor(e,t){super(),this.value=e,this.source=t}},Bt=class extends ft{constructor(e,t){super(),this.pristine=e,this.source=t}},Ut=class extends ft{constructor(e,t){super(),this.touched=e,this.source=t}},ut=class extends ft{constructor(e,t){super(),this.status=e,this.source=t}};function fo(n){return(Tn(n)?n.validators:n)||null}function za(n){return Array.isArray(n)?bi(n):n||null}function po(n,e){return(Tn(e)?e.asyncValidators:n)||null}function Qa(n){return Array.isArray(n)?Ci(n):n||null}function Tn(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Ja(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new at(1e3,"");if(!i[t])throw new at(1001,"")}function Ya(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new at(1002,"")})}var En=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._events=new pr,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Rt}get invalid(){return this.status===vn}get pending(){return this.status==dt}get disabled(){return this.status===Nt}get enabled(){return this.status!==Nt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Kr(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Kr(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Xr(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Xr(e,this._rawAsyncValidators))}hasValidator(e){return bn(this._rawValidators,e)}hasAsyncValidator(e){return bn(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched($(D({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Ut(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Ut(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty($(D({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Bt(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Bt(!0,i))}markAsPending(e={}){this.status=dt;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ut(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending($(D({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Nt,this.errors=null,this._forEachChild(r=>{r.disable($(D({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wn(this.value,i)),this._events.next(new ut(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors($(D({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Rt,this._forEachChild(i=>{i.enable($(D({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors($(D({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rt||this.status===dt)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wn(this.value,t)),this._events.next(new ut(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity($(D({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nt:Rt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=dt,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=ao(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new ut(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Ft,this.statusChanges=new Ft}_calculateStatus(){return this._allControlsDisabled()?Nt:this.errors?vn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dt)?dt:this._anyControlsHaveStatus(vn)?vn:Rt}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Bt(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ut(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Tn(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=za(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Qa(this._rawAsyncValidators)}},Sn=class extends En{constructor(e,t,i){super(fo(t),po(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Ya(this,!0,e),Object.keys(e).forEach(i=>{Ja(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var xi=new lt("CallSetDisabledState",{providedIn:"root",factory:()=>wi}),wi="always";function Ka(n,e){return[...e.path,n]}function mo(n,e,t=wi){go(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Za(n,e),tl(n,e),el(n,e),Xa(n,e)}function Zr(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Xa(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function go(n,e){let t=Wa(n);e.validator!==null?n.setValidators(Yr(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=Ga(n);e.asyncValidator!==null?n.setAsyncValidators(Yr(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Zr(e._rawValidators,r),Zr(e._rawAsyncValidators,r)}function Za(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&yo(n,e)})}function el(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&yo(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function yo(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function tl(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function nl(n,e){n==null,go(n,e)}function il(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function rl(n){return Object.getPrototypeOf(n.constructor)===kn}function ol(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function sl(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===On?t=o:rl(o)?i=o:r=o}),r||i||t||null}var al={provide:ht,useExisting:qe(()=>Ze)},Lt=Promise.resolve(),Ze=(()=>{let e=class e extends ht{constructor(i,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ft,this.form=new Sn({},bi(i),Ci(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){Lt.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),mo(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){Lt.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){Lt.then(()=>{let r=this._findContainer(i.path),o=new Sn({});nl(o,i),r.registerControl(i.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){Lt.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){Lt.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,ol(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(x(vi,10),x(oo,10),x(xi,8))},e.\u0275dir=re({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){r&1&&E("submit",function(d){return o.onSubmit(d)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[He([al]),be]});let n=e;return n})();function eo(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function to(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ll=class extends En{constructor(e=null,t,i){super(fo(t),po(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Tn(t)&&(t.nonNullable||t.initialValueIsDefault)&&(to(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){eo(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){eo(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){to(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var cl={provide:jt,useExisting:qe(()=>Ei)},no=Promise.resolve(),Ei=(()=>{let e=class e extends jt{constructor(i,r,o,s,d,c){super(),this._changeDetectorRef=d,this.callSetDisabledState=c,this.control=new ll,this._registered=!1,this.name="",this.update=new Ft,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=sl(this,s)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),il(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){mo(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){no.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,o=r!==0&&mi(r);no.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?Ka(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(x(ht,9),x(vi,10),x(oo,10),x(qt,10),x(gn,8),x(xi,8))},e.\u0275dir=re({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[He([cl]),be,hi]});let n=e;return n})(),In=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=re({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var dl={provide:qt,useExisting:qe(()=>vo),multi:!0};function _o(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function ul(n){return n.split(":")[0]}var vo=(()=>{let e=class e extends kn{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),o=_o(r,i);this.setProperty("value",o)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=ul(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=ct(e)))(o||e)}})(),e.\u0275dir=re({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){r&1&&E("change",function(d){return o.onChange(d.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[He([dl]),be]});let n=e;return n})(),bo=(()=>{let e=class e{constructor(i,r,o){this._element=i,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(_o(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(x(Ke),x(Fe),x(vo,9))},e.\u0275dir=re({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})(),hl={provide:qt,useExisting:qe(()=>Co),multi:!0};function io(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function fl(n){return n.split(":")[0]}var Co=(()=>{let e=class e extends kn{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let o=i.map(s=>this._getOptionId(s));r=(s,d)=>{s._setSelected(o.indexOf(d.toString())>-1)}}else r=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let o=[],s=r.selectedOptions;if(s!==void 0){let d=s;for(let c=0;c<d.length;c++){let p=d[c],f=this._getOptionValue(p.value);o.push(f)}}else{let d=r.options;for(let c=0;c<d.length;c++){let p=d[c];if(p.selected){let f=this._getOptionValue(p.value);o.push(f)}}}this.value=o,i(o)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=fl(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=ct(e)))(o||e)}})(),e.\u0275dir=re({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){r&1&&E("change",function(d){return o.onChange(d.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[He([hl]),be]});let n=e;return n})(),xo=(()=>{let e=class e{constructor(i,r,o){this._element=i,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(io(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(io(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(x(Ke),x(Fe),x(Co,9))},e.\u0275dir=re({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})();var pl=(()=>{let e=class e{constructor(){this._validator=Jr}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Jr,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=re({type:e,features:[hi]});let n=e;return n})();var ml={provide:vi,useExisting:qe(()=>Si),multi:!0};var Si=(()=>{let e=class e extends pl{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=mi,this.createValidator=i=>Ua}enabled(i){return i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=ct(e)))(o||e)}})(),e.\u0275dir=re({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,o){r&2&&Er("required",o._enabled?"":null)},inputs:{required:"required"},features:[He([ml]),be]});let n=e;return n})();var gl=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ui({type:e}),e.\u0275inj=ci({});let n=e;return n})();var Ie=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:xi,useValue:i.callSetDisabledState??wi}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ui({type:e}),e.\u0275inj=ci({imports:[gl]});let n=e;return n})();var Vi=Z(ko(),1);var Ce=Object.create(null);Ce.open="0";Ce.close="1";Ce.ping="2";Ce.pong="3";Ce.message="4";Ce.upgrade="5";Ce.noop="6";var Ht=Object.create(null);Object.keys(Ce).forEach(n=>{Ht[Ce[n]]=n});var Wt={type:"error",data:"parser error"};var Gt=({type:n,data:e},t,i)=>e instanceof ArrayBuffer||ArrayBuffer.isView(e)?i(t?e:"b"+Oo(e,!0).toString("base64")):i(Ce[n]+(e||"")),Oo=(n,e)=>Buffer.isBuffer(n)||n instanceof Uint8Array&&!e?n:n instanceof ArrayBuffer?Buffer.from(n):Buffer.from(n.buffer,n.byteOffset,n.byteLength),Oi;function Mo(n,e){if(n.data instanceof ArrayBuffer||ArrayBuffer.isView(n.data))return e(Oo(n.data,!1));Gt(n,!0,t=>{Oi||(Oi=new TextEncoder),e(Oi.encode(t))})}var $t=(n,e)=>{if(typeof n!="string")return{type:"message",data:To(n,e)};let t=n.charAt(0);if(t==="b"){let i=Buffer.from(n.substring(1),"base64");return{type:"message",data:To(i,e)}}return Ht[t]?n.length>1?{type:Ht[t],data:n.substring(1)}:{type:Ht[t]}:Wt},To=(n,e)=>{switch(e){case"arraybuffer":return n instanceof ArrayBuffer?n:Buffer.isBuffer(n)?n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength):n.buffer;case"nodebuffer":default:return Buffer.isBuffer(n)?n:Buffer.from(n)}};var Io="",Po=(n,e)=>{let t=n.length,i=new Array(t),r=0;n.forEach((o,s)=>{Gt(o,!1,d=>{i[s]=d,++r===t&&e(i.join(Io))})})},Do=(n,e)=>{let t=n.split(Io),i=[];for(let r=0;r<t.length;r++){let o=$t(t[r],e);if(i.push(o),o.type==="error")break}return i};function Fo(){return new TransformStream({transform(n,e){Mo(n,t=>{let i=t.length,r;if(i<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,i);else if(i<65536){r=new Uint8Array(3);let o=new DataView(r.buffer);o.setUint8(0,126),o.setUint16(1,i)}else{r=new Uint8Array(9);let o=new DataView(r.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(i))}n.data&&typeof n.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(t)})}})}var Mi;function Pn(n){return n.reduce((e,t)=>e+t.length,0)}function Dn(n,e){if(n[0].length===e)return n.shift();let t=new Uint8Array(e),i=0;for(let r=0;r<e;r++)t[r]=n[0][i++],i===n[0].length&&(n.shift(),i=0);return n.length&&i<n[0].length&&(n[0]=n[0].slice(i)),t}function Ao(n,e){Mi||(Mi=new TextDecoder);let t=[],i=0,r=-1,o=!1;return new TransformStream({transform(s,d){for(t.push(s);;){if(i===0){if(Pn(t)<1)break;let c=Dn(t,1);o=(c[0]&128)===128,r=c[0]&127,r<126?i=3:r===126?i=1:i=2}else if(i===1){if(Pn(t)<2)break;let c=Dn(t,2);r=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),i=3}else if(i===2){if(Pn(t)<8)break;let c=Dn(t,8),p=new DataView(c.buffer,c.byteOffset,c.length),f=p.getUint32(0);if(f>Math.pow(2,21)-1){d.enqueue(Wt);break}r=f*Math.pow(2,32)+p.getUint32(4),i=3}else{if(Pn(t)<r)break;let c=Dn(t,r);d.enqueue($t(o?c:Mi.decode(c),e)),i=0}if(r===0||r>n){d.enqueue(Wt);break}}}})}var Ti=4;function A(n){if(n)return _l(n)}function _l(n){for(var e in A.prototype)n[e]=A.prototype[e];return n}A.prototype.on=A.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};A.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};A.prototype.off=A.prototype.removeListener=A.prototype.removeAllListeners=A.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var i,r=0;r<t.length;r++)if(i=t[r],i===e||i.fn===e){t.splice(r,1);break}return t.length===0&&delete this._callbacks["$"+n],this};A.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(t){t=t.slice(0);for(var i=0,r=t.length;i<r;++i)t[i].apply(this,e)}return this};A.prototype.emitReserved=A.prototype.emit;A.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};A.prototype.hasListeners=function(n){return!!this.listeners(n).length};var Ve=process.nextTick,ce=global,Vo="nodebuffer";function Ro(){return new Ii}function vl(n){let e=n.split("; "),t=e[0].indexOf("=");if(t===-1)return;let i=e[0].substring(0,t).trim();if(!i.length)return;let r=e[0].substring(t+1).trim();r.charCodeAt(0)===34&&(r=r.slice(1,-1));let o={name:i,value:r};for(let s=1;s<e.length;s++){let d=e[s].split("=");if(d.length!==2)continue;let c=d[0].trim(),p=d[1].trim();switch(c){case"Expires":o.expires=new Date(p);break;case"Max-Age":let f=new Date;f.setUTCSeconds(f.getUTCSeconds()+parseInt(p,10)),o.expires=f;break;default:}}return o}var Ii=class{constructor(){this._cookies=new Map}parseCookies(e){e&&e.forEach(t=>{let i=vl(t);i&&this._cookies.set(i.name,i)})}get cookies(){let e=Date.now();return this._cookies.forEach((t,i)=>{var r;((r=t.expires)===null||r===void 0?void 0:r.getTime())<e&&this._cookies.delete(i)}),this._cookies.entries()}addCookies(e){let t=[];for(let[i,r]of this.cookies)t.push(`${i}=${r.value}`);t.length&&(e.setDisableHeaderCheck(!0),e.setRequestHeader("cookie",t.join("; ")))}appendCookies(e){for(let[t,i]of this.cookies)e.append("cookie",`${t}=${i.value}`)}};function Fn(n,...e){return e.reduce((t,i)=>(n.hasOwnProperty(i)&&(t[i]=n[i]),t),{})}var bl=ce.setTimeout,Cl=ce.clearTimeout;function Re(n,e){e.useNativeTimers?(n.setTimeoutFn=bl.bind(ce),n.clearTimeoutFn=Cl.bind(ce)):(n.setTimeoutFn=ce.setTimeout.bind(ce),n.clearTimeoutFn=ce.clearTimeout.bind(ce))}var xl=1.33;function No(n){return typeof n=="string"?wl(n):Math.ceil((n.byteLength||n.size)*xl)}function wl(n){let e=0,t=0;for(let i=0,r=n.length;i<r;i++)e=n.charCodeAt(i),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(i++,t+=4);return t}function An(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Lo(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function Bo(n){let e={},t=n.split("&");for(let i=0,r=t.length;i<r;i++){let o=t[i].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}var Yo=Z(ye(),1),zl=(0,Yo.default)("engine.io-client:transport"),Bn=class extends Error{constructor(e,t,i){super(e),this.description=t,this.context=i,this.type="TransportError"}},Ne=class extends A{constructor(e){super(),this.writable=!1,Re(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,i){return super.emitReserved("error",new Bn(e,t,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"?this.write(e):zl("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let t=$t(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){let e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){let t=Lo(e);return t.length?"?"+t:""}};var Ko=Z(ye(),1),we=(0,Ko.default)("engine.io-client:polling"),zt=class extends Ne{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";let t=()=>{we("paused"),this.readyState="paused",e()};if(this._polling||!this.writable){let i=0;this._polling&&(we("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){we("pre-pause polling complete"),--i||t()})),this.writable||(we("we are currently writing - waiting to pause"),i++,this.once("drain",function(){we("pre-pause writing complete"),--i||t()}))}else t()}_poll(){we("polling"),this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){we("polling got data %s",e);let t=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};Do(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"?this._poll():we('ignoring poll - transport state "%s"',this.readyState))}doClose(){let e=()=>{we("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(we("transport open - closing"),e()):(we("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,Po(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=An()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}};var Xo=!1;try{Xo=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}var Zo=Xo;var ts=Z(ye(),1),Ai=(0,ts.default)("engine.io-client:polling");function Ql(){}var Un=class extends zt{constructor(e){if(super(e),typeof location<"u"){let t=location.protocol==="https:",i=location.port;i||(i=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}}doWrite(e,t){let i=this.request({method:"POST",data:e});i.on("success",t),i.on("error",(r,o)=>{this.onError("xhr post error",r,o)})}doPoll(){Ai("xhr poll");let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,i)=>{this.onError("xhr poll error",t,i)}),this.pollXhr=e}},Qt=(()=>{class n extends A{constructor(t,i,r){super(),this.createRequest=t,Re(this,r),this._opts=r,this._method=r.method||"GET",this._uri=i,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;let i=Fn(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");i.xdomain=!!this._opts.xd;let r=this._xhr=this.createRequest(i);try{Ai("xhr open %s: %s",this._method,this._uri),r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var o;r.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},Ai("xhr data %s",this._data),r.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=n.requestsCount++,n.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ql,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete n.requests[this._index],this._xhr=null}}_onLoad(){let t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}return n.requestsCount=0,n.requests={},n})();if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",es);else if(typeof addEventListener=="function"){let n="onpagehide"in ce?"pagehide":"unload";addEventListener(n,es,!1)}}function es(){for(let n in Qt.requests)Qt.requests.hasOwnProperty(n)&&Qt.requests[n].abort()}var rf=function(){let n=Jl({xdomain:!1});return n&&n.responseType!==null}();function Jl(n){let e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Zo))return new XMLHttpRequest}catch{}if(!e)try{return new ce[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}var Yl=Vi.default||Vi,vt=class extends Un{request(e={}){var t;return Object.assign(e,{xd:this.xd,cookieJar:(t=this.socket)===null||t===void 0?void 0:t._cookieJar},this.opts),new Qt(i=>new Yl(i),this.uri(),e)}};var sd=Z(os(),1),ad=Z($i(),1),ld=Z(Qi(),1),ir=Z(tr(),1),cd=Z(na(),1);var ia=Z(ye(),1),dd=(0,ia.default)("engine.io-client:websocket"),ud=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",ei=class extends Ne{get name(){return"websocket"}doOpen(){let e=this.uri(),t=this.opts.protocols,i=ud?{}:Fn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,i)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let i=e[t],r=t===e.length-1;Gt(i,this.supportsBinary,o=>{try{this.doWrite(i,o)}catch{dd("websocket closed before onclose event")}r&&Ve(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=An()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}},Af=ce.WebSocket||ce.MozWebSocket;var Et=class extends ei{createSocket(e,t,i){var r;if(!((r=this.socket)===null||r===void 0)&&r._cookieJar){i.headers=i.headers||{},i.headers.cookie=typeof i.headers.cookie=="string"?[i.headers.cookie]:i.headers.cookie||[];for(let[o,s]of this.socket._cookieJar.cookies)i.headers.cookie.push(`${o}=${s.value}`)}return new ir.default(e,t,i)}doWrite(e,t){let i={};e.options&&(i.compress=e.options.compress),this.opts.perMessageDeflate&&(typeof t=="string"?Buffer.byteLength(t):t.length)<this.opts.perMessageDeflate.threshold&&(i.compress=!1),this.ws.send(t,i)}};var ra=Z(ye(),1),sn=(0,ra.default)("engine.io-client:webtransport"),St=class extends Ne{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{sn("transport closed gracefully"),this.onClose()}).catch(e=>{sn("transport closed due to %s",e),this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{let t=Ao(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(t).getReader(),r=Fo();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();let o=()=>{i.read().then(({done:d,value:c})=>{if(d){sn("session is closed");return}sn("received chunk: %o",c),this.onPacket(c),o()}).catch(d=>{sn("an error occurred while reading: %s",d)})};o();let s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this._writer.write(s).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let i=e[t],r=t===e.length-1;this._writer.write(i).then(()=>{r&&Ve(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}};var rr={websocket:Et,webtransport:St,polling:vt};var hd=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,fd=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function kt(n){if(n.length>8e3)throw"URI too long";let e=n,t=n.indexOf("["),i=n.indexOf("]");t!=-1&&i!=-1&&(n=n.substring(0,t)+n.substring(t,i).replace(/:/g,";")+n.substring(i,n.length));let r=hd.exec(n||""),o={},s=14;for(;s--;)o[fd[s]]=r[s]||"";return t!=-1&&i!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=pd(o,o.path),o.queryKey=md(o,o.query),o}function pd(n,e){let t=/\/{2,9}/g,i=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function md(n,e){let t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,r,o){r&&(t[r]=o)}),t}var oa=Z(ye(),1),F=(0,oa.default)("engine.io-client:socket"),or=typeof addEventListener=="function"&&typeof removeEventListener=="function",an=[];or&&addEventListener("offline",()=>{F("closing %d connection(s) because the network was lost",an.length),an.forEach(n=>n())},!1);var ti=(()=>{class n extends A{constructor(t,i){if(super(),this.binaryType=Vo,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(i=t,t=null),t){let r=kt(t);i.hostname=r.host,i.secure=r.protocol==="https"||r.protocol==="wss",i.port=r.port,r.query&&(i.query=r.query)}else i.host&&(i.hostname=kt(i.host).host);Re(this,i),this.secure=i.secure!=null?i.secure:typeof location<"u"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},i.transports.forEach(r=>{let o=r.prototype.name;this.transports.push(o),this._transportsByName[o]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},i),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Bo(this.opts.query)),or&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(F("adding listener for the 'offline' event"),this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},an.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=Ro()),this._open()}createTransport(t){F('creating transport "%s"',t);let i=Object.assign({},this.opts.query);i.EIO=Ti,i.transport=t,this.id&&(i.sid=this.id);let r=Object.assign({},this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return F("options: %j",r),new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let t=this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";let i=this.createTransport(t);i.open(),this.setTransport(i)}setTransport(t){F("setting transport %s",t.name),this.transport&&(F("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",i=>this._onClose("transport close",i))}onOpen(){F("socket open"),this.readyState="open",n.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(F('socket receive: type "%s", data "%s"',t.type,t.data),this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let i=new Error("server error");i.code=t.data,this._onError(i);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}else F('packet received with socket readyState "%s"',this.readyState)}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let t=this._getWritablePackets();F("flushing %d packets in socket",t.length),this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let i=1;for(let r=0;r<this.writeBuffer.length;r++){let o=this.writeBuffer[r].data;if(o&&(i+=No(o)),r>0&&i>this._maxPayload)return F("only send %d out of %d packets",r,this.writeBuffer.length),this.writeBuffer.slice(0,r);i+=2}return F("payload size is %d (max: %d)",i,this._maxPayload),this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let t=Date.now()>this._pingTimeoutTime;return t&&(F("throttled timer detected, scheduling connection close"),this._pingTimeoutTime=0,Ve(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,i,r){return this._sendPacket("message",t,i,r),this}send(t,i,r){return this._sendPacket("message",t,i,r),this}_sendPacket(t,i,r,o){if(typeof i=="function"&&(o=i,i=void 0),typeof r=="function"&&(o=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;let s={type:t,data:i,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),o&&this.once("flush",o),this.flush()}close(){let t=()=>{this._onClose("forced close"),F("socket closing - telling transport to close"),this.transport.close()},i=()=>{this.off("upgrade",i),this.off("upgradeError",i),t()},r=()=>{this.once("upgrade",i),this.once("upgradeError",i)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(F("socket error %j",t),n.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return F("trying next transport"),this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,i){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(F('socket close with reason: "%s"',t),this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),or&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let r=an.indexOf(this._offlineEventListener);r!==-1&&(F("removing listener for the 'offline' event"),an.splice(r,1))}this.readyState="closed",this.id=null,this.emitReserved("close",t,i),this.writeBuffer=[],this._prevBufferLen=0}}}return n.protocol=Ti,n})(),ni=class extends ti{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade){F("starting upgrade probes");for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}}_probe(e){F('probing transport "%s"',e);let t=this.createTransport(e),i=!1;ti.priorWebsocketSuccess=!1;let r=()=>{i||(F('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",m=>{if(!i)if(m.type==="pong"&&m.data==="probe"){if(F('probe transport "%s" pong',e),this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;ti.priorWebsocketSuccess=t.name==="websocket",F('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{i||this.readyState!=="closed"&&(F("changing transport and sending upgrade packet"),f(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{F('probe transport "%s" failed',e);let C=new Error("probe error");C.transport=t.name,this.emitReserved("upgradeError",C)}}))};function o(){i||(i=!0,f(),t.close(),t=null)}let s=m=>{let C=new Error("probe error: "+m);C.transport=t.name,o(),F('probe transport "%s" failed because of error: %s',e,m),this.emitReserved("upgradeError",C)};function d(){s("transport closed")}function c(){s("socket closed")}function p(m){t&&m.name!==t.name&&(F('"%s" works - aborting "%s"',m.name,t.name),o())}let f=()=>{t.removeListener("open",r),t.removeListener("error",s),t.removeListener("close",d),this.off("close",c),this.off("upgrading",p)};t.once("open",r),t.once("error",s),t.once("close",d),this.once("close",c),this.once("upgrading",p),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){let t=[];for(let i=0;i<e.length;i++)~this.transports.indexOf(e[i])&&t.push(e[i]);return t}},Ot=class extends ni{constructor(e,t={}){let i=typeof e=="object"?e:t;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(r=>rr[r]).filter(r=>!!r)),super(e,i)}};var op=Ot.protocol;var aa=Z(ye(),1),sa=(0,aa.default)("socket.io-client:url");function la(n,e="",t){let i=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(sa("protocol-less url %s",n),typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),sa("parse %s",n),i=kt(n)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";let o=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+e,i.href=i.protocol+"://"+o+(t&&t.port===i.port?"":":"+i.port),i}var hr={};Aa(hr,{Decoder:()=>dr,Encoder:()=>cr,PacketType:()=>k,protocol:()=>pa});var vd=typeof ArrayBuffer=="function",bd=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,ca=Object.prototype.toString,Cd=typeof Blob=="function"||typeof Blob<"u"&&ca.call(Blob)==="[object BlobConstructor]",xd=typeof File=="function"||typeof File<"u"&&ca.call(File)==="[object FileConstructor]";function cn(n){return vd&&(n instanceof ArrayBuffer||bd(n))||Cd&&n instanceof Blob||xd&&n instanceof File}function ln(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,i=n.length;t<i;t++)if(ln(n[t]))return!0;return!1}if(cn(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return ln(n.toJSON(),!0);for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&ln(n[t]))return!0;return!1}function da(n){let e=[],t=n.data,i=n;return i.data=sr(t,e),i.attachments=e.length,{packet:i,buffers:e}}function sr(n,e){if(!n)return n;if(cn(n)){let t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){let t=new Array(n.length);for(let i=0;i<n.length;i++)t[i]=sr(n[i],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){let t={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=sr(n[i],e));return t}return n}function ua(n,e){return n.data=ar(n.data,e),delete n.attachments,n}function ar(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=ar(n[t],e);else if(typeof n=="object")for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=ar(n[t],e));return n}var fa=Z(ye(),1),lr=(0,fa.default)("socket.io-parser"),wd=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],pa=5,k=function(n){return n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK",n}(k||{}),cr=class{constructor(e){this.replacer=e}encode(e){return lr("encoding packet %j",e),(e.type===k.EVENT||e.type===k.ACK)&&ln(e)?this.encodeAsBinary({type:e.type===k.EVENT?k.BINARY_EVENT:k.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===k.BINARY_EVENT||e.type===k.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),lr("encoded %j as %s",e,t),t}encodeAsBinary(e){let t=da(e),i=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(i),r}};function ha(n){return Object.prototype.toString.call(n)==="[object Object]"}var dr=class n extends A{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);let i=t.type===k.BINARY_EVENT;i||t.type===k.BINARY_ACK?(t.type=i?k.EVENT:k.ACK,this.reconstructor=new ur(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(cn(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0,i={type:Number(e.charAt(0))};if(k[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===k.BINARY_EVENT||i.type===k.BINARY_ACK){let o=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);let s=e.substring(o,t);if(s!=Number(s)||e.charAt(t)!=="-")throw new Error("Illegal attachments");i.attachments=Number(s)}if(e.charAt(t+1)==="/"){let o=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););i.nsp=e.substring(o,t)}else i.nsp="/";let r=e.charAt(t+1);if(r!==""&&Number(r)==r){let o=t+1;for(;++t;){let s=e.charAt(t);if(s==null||Number(s)!=s){--t;break}if(t===e.length)break}i.id=Number(e.substring(o,t+1))}if(e.charAt(++t)){let o=this.tryParse(e.substr(t));if(n.isPayloadValid(i.type,o))i.data=o;else throw new Error("invalid payload")}return lr("decoded %s as %j",e,i),i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case k.CONNECT:return ha(t);case k.DISCONNECT:return t===void 0;case k.CONNECT_ERROR:return typeof t=="string"||ha(t);case k.EVENT:case k.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&wd.indexOf(t[0])===-1);case k.ACK:case k.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},ur=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let t=ua(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function fe(n,e,t){return n.on(e,t),function(){n.off(e,t)}}var ma=Z(ye(),1),z=(0,ma.default)("socket.io-client:socket"),Ed=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Mt=class extends A{constructor(e,t,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[fe(e,"open",this.onopen.bind(this)),fe(e,"packet",this.onpacket.bind(this)),fe(e,"error",this.onerror.bind(this)),fe(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var i,r,o;if(Ed.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;let s={type:k.EVENT,data:t};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){let f=this.ids++;z("emitting packet with ack id %d",f);let m=t.pop();this._registerAckCallback(f,m),s.id=f}let d=(r=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||r===void 0?void 0:r.writable,c=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!d?z("discard packet as the transport is not currently writable"):c?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s),this.flags={},this}_registerAckCallback(e,t){var i;let r=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(r===void 0){this.acks[e]=t;return}let o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===e&&(z("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(d,1));z("event with ack id %d has timed out after %d ms",e,r),t.call(this,new Error("operation has timed out"))},r),s=(...d)=>{this.io.clearTimeoutFn(o),t.apply(this,d)};s.withError=!0,this.acks[e]=s}emitWithAck(e,...t){return new Promise((i,r)=>{let o=(s,d)=>s?r(s):i(d);o.withError=!0,t.push(o),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());let i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...o)=>i!==this._queue[0]?void 0:(r!==null?i.tryCount>this._opts.retries&&(z("packet [%d] is discarded after %d tries",i.id,i.tryCount),this._queue.shift(),t&&t(r)):(z("packet [%d] was successfully sent",i.id),this._queue.shift(),t&&t(null,...o)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(z("draining queue"),!this.connected||this._queue.length===0)return;let t=this._queue[0];if(t.pending&&!e){z("packet [%d] has already been sent and is waiting for an ack",t.id);return}t.pending=!0,t.tryCount++,z("sending packet [%d] (try n\xB0%d)",t.id,t.tryCount),this.flags=t.flags,this.emit.apply(this,t.args)}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){z("transport is open - connecting"),typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:k.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){z("close (%s)",e),this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(i=>String(i.id)===e)){let i=this.acks[e];delete this.acks[e],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case k.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case k.EVENT:case k.BINARY_EVENT:this.onevent(e);break;case k.ACK:case k.BINARY_ACK:this.onack(e);break;case k.DISCONNECT:this.ondisconnect();break;case k.CONNECT_ERROR:this.destroy();let i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){let t=e.data||[];z("emitting event %j",t),e.id!=null&&(z("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){let t=this._anyListeners.slice();for(let i of t)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){let t=this,i=!1;return function(...r){i||(i=!0,z("sending ack %j",r),t.packet({type:k.ACK,id:e,data:r}))}}onack(e){let t=this.acks[e.id];if(typeof t!="function"){z("bad ack %s",e.id);return}delete this.acks[e.id],z("calling ack %s with %j",e.id,e.data),t.withError&&e.data.unshift(null),t.apply(this,e.data)}onconnect(e,t){z("socket connected with id %s",e),this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){z("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(z("performing disconnect (%s)",this.nsp),this.packet({type:k.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let t=this._anyOutgoingListeners.slice();for(let i of t)i.apply(this,e.data)}}};function ot(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}ot.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=Math.floor(e*10)&1?n+t:n-t}return Math.min(n,this.max)|0};ot.prototype.reset=function(){this.attempts=0};ot.prototype.setMin=function(n){this.ms=n};ot.prototype.setMax=function(n){this.max=n};ot.prototype.setJitter=function(n){this.jitter=n};var ga=Z(ye(),1),ee=(0,ga.default)("socket.io-client:manager"),Tt=class extends A{constructor(e,t){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Re(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((i=t.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new ot({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;let r=t.parser||hr;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(ee("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;ee("opening %s",this.uri),this.engine=new Ot(this.uri,this.opts);let t=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;let r=fe(t,"open",function(){i.onopen(),e&&e()}),o=d=>{ee("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",d),e?e(d):this.maybeReconnectOnOpen()},s=fe(t,"error",o);if(this._timeout!==!1){let d=this._timeout;ee("connect attempt will timeout after %d",d);let c=this.setTimeoutFn(()=>{ee("connect attempt timed out after %d",d),r(),o(new Error("timeout")),t.close()},d);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(r),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){ee("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(fe(e,"ping",this.onping.bind(this)),fe(e,"data",this.ondata.bind(this)),fe(e,"error",this.onerror.bind(this)),fe(e,"close",this.onclose.bind(this)),fe(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Ve(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){ee("error",e),this.emitReserved("error",e)}socket(e,t){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new Mt(this,e,t),this.nsps[e]=i),i}_destroy(e){let t=Object.keys(this.nsps);for(let i of t)if(this.nsps[i].active){ee("socket %s is still active, skipping close",i);return}this._close()}_packet(e){ee("writing packet %j",e);let t=this.encoder.encode(e);for(let i=0;i<t.length;i++)this.engine.write(t[i],e.options)}cleanup(){ee("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){ee("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var i;ee("closed due to %s",e),this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)ee("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let t=this.backoff.duration();ee("will wait %dms before reconnect attempt",t),this._reconnecting=!0;let i=this.setTimeoutFn(()=>{e.skipReconnect||(ee("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(ee("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):(ee("reconnect success"),e.onreconnect())}))},t);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}};var _a=Z(ye(),1),ya=(0,_a.default)("socket.io-client"),dn={};function st(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};let t=la(n,e.path||"/socket.io"),i=t.source,r=t.id,o=t.path,s=dn[r]&&o in dn[r].nsps,d=e.forceNew||e["force new connection"]||e.multiplex===!1||s,c;return d?(ya("ignoring socket cache for %s",i),c=new Tt(i,e)):(dn[r]||(ya("new io instance for %s",i),dn[r]=new Tt(i,e)),c=dn[r]),t.query&&!e.query&&(e.query=t.queryKey),c.socket(t.path,e)}Object.assign(st,{Manager:Tt,Socket:Mt,io:st,connect:st});function Sd(n,e){if(n&1){let t=H();a(0,"div",15)(1,"div",16),g(2,"img",17),l(),a(3,"div",18)(4,"div",19)(5,"label",20),E("click",function(){let r=y(t).$implicit,o=V(2);return _(o.restaurantPage(r.id,r.distance))}),u(6),l()(),a(7,"div",21)(8,"div",22)(9,"h6"),u(10),l()(),a(11,"div",23)(12,"h6"),u(13),Ae(14,"number"),l()()()()()}if(n&2){let t=e.$implicit;h(2),b("src","http://localhost:3000/"+t.images,ve),h(4),j(t.name),h(4),N("\u062D\u0644\u0627\u0644 rating: ",t.halalRating,""),h(3),N("",Xe(14,4,t.distance,"1.1-1"),"KM Away from you")}}function kd(n,e){if(n&1&&(a(0,"div",13),T(1,Sd,15,7,"div",14),l()),n&2){let t=V();h(),b("ngForOf",t.restaurantPackage)}}function Od(n,e){n&1&&(a(0,"div",24)(1,"h2"),u(2,"You have not placed any orders yet!"),l()())}function Md(n,e){if(n&1&&(a(0,"div",29)(1,"div",30)(2,"label",31),u(3),l()(),a(4,"div",30)(5,"label",31),u(6),l()()()),n&2){let t=e.$implicit;h(3),N("Order ID: ",t.id,""),h(3),N("Status: ",t.status,"")}}function Td(n,e){if(n&1&&(a(0,"div",25)(1,"div",26)(2,"label",27),u(3,"Orders Placed"),l()(),T(4,Md,7,2,"div",28),l()),n&2){let t=V();h(4),b("ngForOf",t.cxOrders)}}var va=(()=>{let e=class e{constructor(i,r,o,s){this.platformId=i,this.http=r,this.router=o,this.route=s,this.longitude=0,this.latitude=0,this.cxOrders=[],this.restaurantPackage=[],mn(()=>{this.initilizeSockets()})}ngOnInit(){Me(this.platformId)&&(window.logout=this.logout.bind(this),navigator.geolocation?navigator.geolocation.getCurrentPosition(i=>{this.latitude=i.coords.latitude,this.longitude=i.coords.longitude,console.log(`lat: ${this.latitude}, long: ${this.longitude}`),this.getCloseRestaurants(),console.log("get closer restaurants caled in front end")}):console.log("get restaurants request not sent"),this.getCloseRestaurants(),console.log("about to call get cx orders"),this.getCxOrders())}initilizeSockets(){let i=st(`${R.backendURL}`,{withCredentials:!0});i.on("connect",()=>{i.emit("customerConnected"),console.log("cx front end connected to back end")}),i.on("orderProgressed",r=>{console.log("order progressed!");let o=this.cxOrders.find(s=>s.id===r.orderId);o.status=r.orderStatus})}logout(i){console.log("logout attempt initiated!"),this.http.post(`${R.backendURL}/logout`,{id_token:i.credential},{withCredentials:!0}).subscribe({next:r=>{r.success?this.router.navigateByUrl(r.redirectUrl):console.log("unexpected json format! ",r)},error:r=>{console.error("Error: ",r)}})}getCloseRestaurants(){console.log(`get close restauratns function called, it sent the following data: lat: ${this.latitude}, long: ${this.longitude} `),this.http.post(`${R.backendURL}/getCloseRestaurants`,{long:this.longitude,lat:this.latitude},{withCredentials:!0}).subscribe({next:i=>{if(i.success){let r=JSON.parse(i.restaurantPackage);this.restaurantPackage=[];for(let o=0;o<r.length;o++){let s=r[o];this.restaurantPackage.push({id:s.id,name:s.name,location:s.location,openingHours:s.openingHours,halalRating:s.halalRating,images:s.images,distance:s.DISTANCE})}console.log(this.restaurantPackage)}else alert(i.message)},error:i=>{console.error("Error: ",i)}})}restaurantPage(i,r){console.log("restaurantPage is being clicked___________________________________"),this.router.navigate(["/restaurantPage",i],{queryParams:{restaurantId:i,distance:r}})}getCxOrders(){console.log("inside get cx orders!"),this.http.post(`${R.backendURL}/getcxOrders`,{userId:"variablePlaceHolder"},{withCredentials:!0}).subscribe({next:i=>{i.success?(this.cxOrders=i.orders,this.cxOrders.forEach(r=>{r.items=JSON.parse(r.items)})):alert(i.message)},error:i=>{console.error("error: ",i)}})}};e.\u0275fac=function(r){return new(r||e)(x(ke),x(me),x(ge),x(Ge))},e.\u0275cmp=ie({type:e,selectors:[["app-dash-board"]],standalone:!0,features:[oe],decls:14,vars:3,consts:[[1,"mainDiv"],[1,"topBar"],[1,"logo"],["src","http://localhost:3000/uploads/newlogo33.png","alt","Logo",1,"logoimg"],[1,"logoutDiv"],[1,"logoutBtn",3,"click"],[1,"mainContent"],[1,"coverPhoto"],["src","http://localhost:3000/uploads/CoverImg.jpg","alt","Cover Image",1,"coverImg"],[1,"crammedDiv"],["class","restaurantContainer",4,"ngIf"],["class","noOrders",4,"ngIf"],["class","cxOrdersContainer",4,"ngIf"],[1,"restaurantContainer"],["class","restaurant",4,"ngFor","ngForOf"],[1,"restaurant"],[1,"coverImgDiv"],["alt","Description of image",1,"restaurantCoverImg",3,"src"],[1,"restaurantDetails"],[1,"resName"],[1,"restaurantNameLabel",3,"click"],[1,"disrating"],[1,"rating"],[1,"dis"],[1,"noOrders"],[1,"cxOrdersContainer"],[1,"ordersTitle"],[1,"titlesLable"],["class","cxOrderItems",4,"ngFor","ngForOf"],[1,"cxOrderItems"],[1,"orderinfo"],[1,"orderLabel"]],template:function(r,o){r&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),g(3,"img",3),l(),a(4,"div",4)(5,"button",5),E("click",function(){return o.logout("logout requested!")}),u(6,"Log Out"),l()()(),a(7,"div",6)(8,"div",7),g(9,"img",8),l(),a(10,"div",9),T(11,kd,2,1,"div",10)(12,Od,3,0,"div",11)(13,Td,5,1,"div",12),l()()()),r&2&&(h(11),b("ngIf",o.restaurantPackage),h(),b("ngIf",!o.cxOrders),h(),b("ngIf",o.cxOrders))},dependencies:[pe,We,Oe,yn],styles:['.mainDiv[_ngcontent-%COMP%]{background:#e5e8e2;width:100vw;height:100vh;display:flex;flex-direction:column;z-index:0;position:relative}.topBar[_ngcontent-%COMP%]{width:100%;display:flex;margin-top:1%;margin-bottom:1%;margin-right:10px;height:10%;position:relative;flex-direction:row;justify-content:space-between}.logo[_ngcontent-%COMP%]{width:15%}.logoimg[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.logoutDiv[_ngcontent-%COMP%]{width:10%;display:flex;justify-content:center;align-items:center}.logoutBtn[_ngcontent-%COMP%]{margin-top:20px;bottom:0;display:inline-flex;align-items:center;justify-content:center;padding:8px 16px;font-size:16px;font-weight:500;cursor:pointer;transition:all .3s ease;outline:none;-webkit-user-select:none;user-select:none;color:#fff;border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:#000;border-right-color:#000;border-bottom-color:#000;border-left-color:#000;border-radius:4px;background-color:#334625;box-shadow:7px 7px 8px #0003}.logoutBtn[_ngcontent-%COMP%]:hover{transition:all .3s ease;transform:scale(1.1);background-color:#4b6134}.hrefDiv[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.nav__links[_ngcontent-%COMP%]{list-style:none}.nav__links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;padding:9px,20px;margin-right:15px}.nav__links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{transition:all .3s ease 0s}.nav__links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0088a9}.coverPhoto[_ngcontent-%COMP%]{width:100%;height:20%}.coverImg[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.mainContent[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;align-items:center}.crammedDiv[_ngcontent-%COMP%]{width:97%;display:flex;height:100%;flex-direction:row}.restaurantContainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:80%;height:100%;margin:20px 0 20px 20px;flex-wrap:wrap}.restaurant[_ngcontent-%COMP%]{border-radius:9px;display:flex;flex-direction:column;width:30%;margin:10px;height:20%;transition:.3s ease;scale:1;background-color:#9ebb8d;box-shadow:7px 7px 8px #0003;overflow:hidden}.restaurant[_ngcontent-%COMP%]:hover{scale:1.1;border:1px solid}.coverImgDiv[_ngcontent-%COMP%]{width:100%;height:60%;display:flex;border-top-right-radius:9px;border-top-left-radius:9px}.restaurantCoverImg[_ngcontent-%COMP%]{width:100%;height:100%;border-top-right-radius:9px;border-top-left-radius:9px;object-fit:cover}.resName[_ngcontent-%COMP%]{margin-left:10px}.restaurantNameLabel[_ngcontent-%COMP%]{font-size:150%;font-weight:700;font-family:"lato" sans-serif}.disrating[_ngcontent-%COMP%]{margin:10px;display:flex;justify-content:space-between}.cxOrdersContainer[_ngcontent-%COMP%]{margin-top:20px;display:flex;padding:20px;flex-direction:column;background-color:#9ebb8d;height:fit-content;border-radius:9px;width:20%;box-shadow:7px 7px 8px #0003}.ordersTitle[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;border-bottom:solid 1px}.titlesLable[_ngcontent-%COMP%]{font-weight:700;font-size:large}.cxOrderItems[_ngcontent-%COMP%]{margin-bottom:20px;width:100%;display:flex;flex-direction:row;justify-content:space-evenly}.cxOrderItems[_ngcontent-%COMP%]:nth-child(2n){background-color:#bcd9ab}.orderinfo[_ngcontent-%COMP%]{width:50%;height:fit-content}.orderLabel[_ngcontent-%COMP%]{font-weight:700;font-size:medium}']});let n=e;return n})();var Id=["resLocationInput"],Pd=["itemContainer"],Dd=["resForm"],Fd=["container1"],Ad=["container2"],Vd=["NameLocationImg"],Rd=["quesBox"],Nd=["inputFields"];function Ld(n,e){if(n&1){let t=H();a(0,"div",74,6)(2,"input",75),E("change",function(r){y(t);let o=V();return _(o.updateHalalRating(r))}),l(),a(3,"label",76),u(4),l()()}if(n&2){let t=e.$implicit,i=e.index;h(2),pi("id","questions",i,""),h(),pi("for","question",i,""),h(),j(t)}}function Bd(n,e){if(n&1){let t=H();a(0,"div",78),E("click",function(){let r=y(t).$implicit,o=V(2);return _(o.selectPrediction(r))}),u(1),l()}if(n&2){let t=e.$implicit;h(),N(" ",t.description," ")}}function Ud(n,e){if(n&1&&(a(0,"ul"),T(1,Bd,2,1,"div",77),l()),n&2){let t=V();h(),b("ngForOf",t.predictions)}}var ba=(()=>{let e=class e{constructor(i,r,o,s,d,c){this.platformId=i,this.http=r,this.router=o,this.ngZone=s,this.renderer=d,this.googleAuthService=c,this.resForm=Ze,this.predictions=[],this.apikey=R.googleMaps_api_key,this.halalQuestions=["My restaurant sells halal chicken.","My restaurant sells hand-slaughtered chicken.","My restaurant sells halal beef.","My restaurant sells halal lamb.","My restaurant DOES NOT sell pork products.","My restaurant DOES NOT sell products that contain animal derived gelatin.","My meat supplier is a recognised halal certified body.","All my ingredients are sourced from halal-certified suppliers?","My restaurant DOES NOT sells alcoholic beverages.","My restaurant ensures that NO alcoholic products are used in the cooking process."],this.resInfo={name:"",location:"",lat:null,lon:null,photo:"",days:{monday:{open:!1,openingHours:{start:"",end:""}},tuesday:{open:!1,openingHours:{start:"",end:""}},wednesday:{open:!1,openingHours:{start:"",end:""}},thursday:{open:!1,openingHours:{start:"",end:""}},friday:{open:!1,openingHours:{start:"",end:""}},saturday:{open:!1,openingHours:{start:"",end:""}},sunday:{open:!1,openingHours:{start:"",end:""}}},halalRating:0},this.menueItem={type:"",name:"",description:"",price:0,halal:!1,vegan:!1,vegetarian:!1,glutenFree:!1,lactoseFree:!1,imgPath:""},this.selectedFile=null}ngOnInit(){Me(this.platformId)&&(window.handleFormSubmission=this.handleFormSubmission.bind(this)),this.autocompleteService=new google.maps.places.AutocompleteService,this.googleAuthService.initilizeGoogleAuth(),this.googleAuthService.renderGoogleBtn("googlebtn"),this.credentialSubscription=this.googleAuthService.getCredentialResponse().subscribe(i=>{i&&(console.log("Received credentiuals in the ccomponent:",i),this.handleFormSubmission(i))})}ngAfterViewInit(){let i=this.container1Ref.nativeElement;this.FadeInElement(i).then(()=>hn(this,null,function*(){let r=this.quesBoxes.toArray();for(let o=0;o<r.length;o++){let s=r[o].nativeElement;yield this.FadeInElement(s)}}))}ngOnDestroy(){this.credentialSubscription&&this.credentialSubscription.unsubscribe()}onFileSelected(i){this.selectedFile=i.target.files[0]}handleFormSubmission(i){if(this.resInfo.halalRating>=7){if(this.validateResInfo()){let o=JSON.stringify(this.resInfo),s=new FormData;s.append("auth_token",i.credential),s.append("resInfo",o),s.append("image",this.selectedFile,this.selectedFile.name),s.append("type","main"),s.append("relItem",""),this.http.post(`${R.backendURL}/listRestaurant`,s,{withCredentials:!0}).subscribe({next:d=>{d.success?(alert(d.message),this.router.navigateByUrl(d.redirectUrl)):console.log("unexpected json format! ",d.message)},error:d=>{console.error("Error: ",d)}})}}else alert("Your halal rating is less than the minimum allowed! your restaurant is not eligible to be on this website!"),this.router.navigateByUrl("/login")}onLocationChange(i){let r=i.target;if(r){let o=r.value;o?this.autocompleteService.getPlacePredictions({input:o},(s,d)=>{d===google.maps.places.PlacesServiceStatus.OK&&s?this.ngZone.run(()=>{this.predictions=s}):this.ngZone.run(()=>{this.predictions=[]})}):this.predictions=[]}}selectPrediction(i){let r=i.place_id;r&&new google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:r},(s,d)=>{this.resInfo.location=s?.formatted_address||"",this.resInfo.lat=s?.geometry?.location?.lat()||null,this.resInfo.lon=s?.geometry?.location?.lng()||null})}updateHalalRating(i){i.target.checked?this.resInfo.halalRating++:this.resInfo.halalRating--}nextSection(i){if(this.resInfo.halalRating<7){alert("your restaurant does not qualify to be listed on this site!"),this.router.navigateByUrl("/login");return}else if(this.resInfo.halalRating>=7){console.log("event called");let r=this.container1Ref.nativeElement,o=this.container2Ref.nativeElement;r.classList.add("hidden"),o.classList.add("visible")}}previous(i){let r=this.container1Ref.nativeElement;this.container2Ref.nativeElement.classList.remove("visible"),r.classList.remove("hidden")}FadeInElement(i){return hn(this,null,function*(){let r=0;return new Promise(o=>{let s=setInterval(()=>{r+=.1,i.style.opacity=r.toString(),r>=1&&(clearInterval(s),o())},25)})})}FadeOutElement(i){return hn(this,null,function*(){let r=1;return new Promise(o=>{let s=setInterval(()=>{r-=.1,i.style.opacity=r.toString(),r<=0&&(clearInterval(s),o())},25)})})}validateResInfo(){let i=this.resInfo;if(i.name.length>39||i.name.length<3){let r=document.getElementById("resName");return r.style.borderColor="red",!1}if(i.location===""||i.lat===null||i.lon===null){let r=document.getElementById("resLocation");return r.style.borderColor="red",!1}for(let r of Object.keys(i.days)){let o=i.days[r];if(o.open===!0&&(o.openingHours.start===""||o.openingHours.end==="")){let s=document.getElementById("openingHeading");return s.style.color="red",console.log("timesdiv should be coloured"),!1}}return!0}};e.\u0275fac=function(r){return new(r||e)(x(ke),x(me),x(ge),x(pn),x(Fe),x(_n))},e.\u0275cmp=ie({type:e,selectors:[["app-listing-form"]],viewQuery:function(r,o){if(r&1&&(J(Id,7),J(Pd,7),J(Dd,5),J(Fd,5),J(Ad,5),J(Vd,5),J(Rd,5),J(Nd,5)),r&2){let s;Y(s=K())&&(o.resLocation=s.first),Y(s=K())&&(o.itemContainer=s.first),Y(s=K())&&(o.resForm=s.first),Y(s=K())&&(o.container1Ref=s.first),Y(s=K())&&(o.container2Ref=s.first),Y(s=K())&&(o.NameLocationImg=s.first),Y(s=K())&&(o.quesBoxes=s),Y(s=K())&&(o.inputFields=s)}},standalone:!0,features:[oe],decls:128,vars:25,consts:[["container1",""],["container2",""],["resForm","ngForm"],["NameLocationImg",""],["inputField",""],["inputField","","resLocationInput",""],["quesBox",""],[1,"topBar"],[1,"logo"],["src","http://localhost:3000/uploads/newlogo33.png","alt","Logo",1,"logoimg"],[1,"ParentContainer"],[1,"container1"],[1,"containerTitle"],["class","quesBox",4,"ngFor","ngForOf"],[1,"nextSectionBtn"],[1,"nextBtn",3,"click"],[1,"container2"],[1,"resInfoForm"],[1,"overallInfo"],[1,"NameLocationImg"],[1,"Leftelement"],["for","resName",1,"res"],["type","text","id","resName","name","resName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","resLocation",1,"res"],["type","text","id","resLocation","name","resLocation","required","",1,"form-control",3,"ngModelChange","input","ngModel"],[4,"ngIf"],["for","resPhoto",1,"res"],[1,"warningText"],["type","file","id","resPhoto","name","resPhoto","accept","image/*","required","",1,"form-control",3,"change"],["id","times",1,"time-inputsS"],["id","openingHeading",1,"Openingschedule"],[1,"checkbox"],[1,"dayName"],["type","checkbox","name","daysMondayOpen",1,"form-check-input",3,"ngModelChange","ngModel"],[1,"time-inputs"],["for","resMondayOpeningTime "],["type","time","id","resMondayOpeningTime","name","resMondayOpeningTime",1,"time-slot",3,"ngModelChange","ngModel"],["for","resMondayClosingTime"],["type","time","id","resMondayClosingTime","name","resMondayClosingTime",1,"time-slot",3,"ngModelChange","ngModel"],["type","checkbox","name","daysTuesdayOpen",1,"form-check-input",3,"ngModelChange","ngModel"],["for","resTuesdayOpeningTime "],["type","time","id","resTuesdayOpeningTime","name","resTuesdayOpeningTime",1,"time-slot",3,"ngModelChange","ngModel"],["for","resTuesdayClosingTime"],["type","time","id","resTuesdayClosingTime","name","resTuesdayClosingTime",1,"time-slot",3,"ngModelChange","ngModel"],["type","checkbox","name","daysWednesdayOpen",1,"form-check-input",3,"ngModelChange","ngModel"],["for","resWednesdayOpeningTime "],["type","time","id","resWednesdayOpeningTime","name","resWednesdayOpeningTime",1,"time-slot",3,"ngModelChange","ngModel"],["for","resWednesdayClosingTime"],["type","time","id","resWednesdayClosingTime","name","resWednesdayClosingTime",1,"time-slot",3,"ngModelChange","ngModel"],["type","checkbox","name","daysThursdayOpen",1,"form-check-input",3,"ngModelChange","ngModel"],["for","resThursdayOpeningTime "],["type","time","id","resThursdayOpeningTime","name","resThursdayOpeningTime",1,"time-slot",3,"ngModelChange","ngModel"],["for","resThursdayClosingTime"],["type","time","id","resThursdayClosingTime","name","resThursdayClosingTime",1,"time-slot",3,"ngModelChange","ngModel"],["type","checkbox","name","daysFridayOpen",1,"form-check-input",3,"ngModelChange","ngModel"],["for","resFridayOpeningTime "],["type","time","id","resFridayOpeningTime","name","resFridayOpeningTime",1,"time-slot",3,"ngModelChange","ngModel"],["for","resFridayClosingTime"],["type","time","id","resFridayClosingTime","name","resFridayClosingTime",1,"time-slot",3,"ngModelChange","ngModel"],["type","checkbox","name","daysSaturdayOpen",1,"form-check-input",3,"ngModelChange","ngModel"],["for","resSaturdayOpeningTime "],["type","time","id","resSaturdayOpeningTime","name","resSaturdayOpeningTime",1,"time-slot",3,"ngModelChange","ngModel"],["for","resSaturdayClosingTime"],["type","time","id","resSaturdayClosingTime","name","resSaturdayClosingTime",1,"time-slot",3,"ngModelChange","ngModel"],["type","checkbox","name","daysSundayOpen",1,"form-check-input",3,"ngModelChange","ngModel"],[1,"time-inputs","lastTimeInput"],["for","resSundayOpeningTime "],["type","time","id","resSundayOpeningTime","name","resSundayOpeningTime",1,"time-slot",3,"ngModelChange","ngModel"],["for","resSundayClosingTime"],["type","time","id","resSundayClosingTime","name","resSundayClosingTime",1,"time-slot",3,"ngModelChange","ngModel"],[1,"previousbtn"],[1,"googlebtnWarning"],[1,"warningTextDiv"],["id","googlebtn"],[1,"quesBox"],["type","checkbox",1,"form-check-input",3,"change","id"],[1,"quesText",3,"for"],["class","predicOption",3,"click",4,"ngFor","ngForOf"],[1,"predicOption",3,"click"]],template:function(r,o){if(r&1){let s=H();a(0,"div",7)(1,"div",8),g(2,"img",9),l()(),a(3,"div",10)(4,"div",11,0)(6,"h1",12),u(7,"Halal Eligibility Checklist"),l(),T(8,Ld,5,5,"div",13),a(9,"div",14)(10,"button",15),E("click",function(c){return y(s),_(o.nextSection(c))}),u(11,"Next"),l()()(),a(12,"div",16,1)(14,"h1",12),u(15,"Enter your restaurant's details"),l(),a(16,"form",17,2)(18,"div",18)(19,"div",19,3)(21,"div",20)(22,"label",21),u(23,"Restaurant Name *"),l(),a(24,"input",22,4),U("ngModelChange",function(c){return y(s),B(o.resInfo.name,c)||(o.resInfo.name=c),_(c)}),l()(),a(26,"div",20)(27,"label",23),u(28,"Location *"),l(),a(29,"input",24,5),U("ngModelChange",function(c){return y(s),B(o.resInfo.location,c)||(o.resInfo.location=c),_(c)}),E("input",function(c){return y(s),_(o.onLocationChange(c))}),l(),T(32,Ud,2,1,"ul",25),l(),a(33,"div",20)(34,"label",26),u(35,"Cover Photo *"),l(),a(36,"label",27),u(37,"Please ensure your photo has 2.63:1 ratio or a 820x3120 resolution"),l(),a(38,"input",28,4),E("change",function(c){return y(s),_(o.onFileSelected(c))}),l()()(),a(40,"div",29)(41,"label",30),u(42,"Open Hours"),l(),a(43,"div",31)(44,"label",32)(45,"input",33),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.monday.open,c)||(o.resInfo.days.monday.open=c),_(c)}),l(),u(46," Monday "),l()(),a(47,"div",34)(48,"label",35),u(49,"Open from"),l(),a(50,"input",36),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.monday.openingHours.start,c)||(o.resInfo.days.monday.openingHours.start=c),_(c)}),l(),a(51,"label",37),u(52,"until"),l(),a(53,"input",38),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.monday.openingHours.end,c)||(o.resInfo.days.monday.openingHours.end=c),_(c)}),l()(),a(54,"div",31)(55,"label",32)(56,"input",39),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.tuesday.open,c)||(o.resInfo.days.tuesday.open=c),_(c)}),l(),u(57," Tuesday "),l()(),a(58,"div",34)(59,"label",40),u(60,"Open from"),l(),a(61,"input",41),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.tuesday.openingHours.start,c)||(o.resInfo.days.tuesday.openingHours.start=c),_(c)}),l(),a(62,"label",42),u(63,"until"),l(),a(64,"input",43),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.tuesday.openingHours.end,c)||(o.resInfo.days.tuesday.openingHours.end=c),_(c)}),l()(),a(65,"div",31)(66,"label",32)(67,"input",44),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.wednesday.open,c)||(o.resInfo.days.wednesday.open=c),_(c)}),l(),u(68," Wednesday "),l()(),a(69,"div",34)(70,"label",45),u(71,"Open from"),l(),a(72,"input",46),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.wednesday.openingHours.start,c)||(o.resInfo.days.wednesday.openingHours.start=c),_(c)}),l(),a(73,"label",47),u(74,"until"),l(),a(75,"input",48),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.wednesday.openingHours.end,c)||(o.resInfo.days.wednesday.openingHours.end=c),_(c)}),l()(),a(76,"div",31)(77,"label",32)(78,"input",49),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.thursday.open,c)||(o.resInfo.days.thursday.open=c),_(c)}),l(),u(79," Thursday "),l()(),a(80,"div",34)(81,"label",50),u(82,"Open from"),l(),a(83,"input",51),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.thursday.openingHours.start,c)||(o.resInfo.days.thursday.openingHours.start=c),_(c)}),l(),a(84,"label",52),u(85,"until"),l(),a(86,"input",53),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.thursday.openingHours.end,c)||(o.resInfo.days.thursday.openingHours.end=c),_(c)}),l()(),a(87,"div",31)(88,"label",32)(89,"input",54),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.friday.open,c)||(o.resInfo.days.friday.open=c),_(c)}),l(),u(90," Friday "),l()(),a(91,"div",34)(92,"label",55),u(93,"Open from"),l(),a(94,"input",56),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.friday.openingHours.start,c)||(o.resInfo.days.friday.openingHours.start=c),_(c)}),l(),a(95,"label",57),u(96,"until"),l(),a(97,"input",58),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.friday.openingHours.end,c)||(o.resInfo.days.friday.openingHours.end=c),_(c)}),l()(),a(98,"div",31)(99,"label",32)(100,"input",59),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.saturday.open,c)||(o.resInfo.days.saturday.open=c),_(c)}),l(),u(101," Saturday "),l()(),a(102,"div",34)(103,"label",60),u(104,"Open from"),l(),a(105,"input",61),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.saturday.openingHours.start,c)||(o.resInfo.days.saturday.openingHours.start=c),_(c)}),l(),a(106,"label",62),u(107,"until"),l(),a(108,"input",63),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.saturday.openingHours.end,c)||(o.resInfo.days.saturday.openingHours.end=c),_(c)}),l()(),a(109,"div",31)(110,"label",32)(111,"input",64),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.sunday.open,c)||(o.resInfo.days.sunday.open=c),_(c)}),l(),u(112," Sunday "),l()(),a(113,"div",65)(114,"label",66),u(115,"Open from"),l(),a(116,"input",67),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.sunday.openingHours.start,c)||(o.resInfo.days.sunday.openingHours.start=c),_(c)}),l(),a(117,"label",68),u(118,"until"),l(),a(119,"input",69),U("ngModelChange",function(c){return y(s),B(o.resInfo.days.sunday.openingHours.end,c)||(o.resInfo.days.sunday.openingHours.end=c),_(c)}),l()()()(),a(120,"div",70)(121,"button",15),E("click",function(c){return y(s),_(o.previous(c))}),u(122,"Previous"),l()(),a(123,"div",71)(124,"div",72)(125,"label",27),u(126,"Please use the same email for this account as the one linked to your PayPal payments."),l()(),g(127,"div",73),l()()()()}r&2&&(h(8),b("ngForOf",o.halalQuestions),h(16),L("ngModel",o.resInfo.name),h(5),L("ngModel",o.resInfo.location),h(3),b("ngIf",o.predictions&&o.predictions.length>0),h(13),L("ngModel",o.resInfo.days.monday.open),h(5),L("ngModel",o.resInfo.days.monday.openingHours.start),h(3),L("ngModel",o.resInfo.days.monday.openingHours.end),h(3),L("ngModel",o.resInfo.days.tuesday.open),h(5),L("ngModel",o.resInfo.days.tuesday.openingHours.start),h(3),L("ngModel",o.resInfo.days.tuesday.openingHours.end),h(3),L("ngModel",o.resInfo.days.wednesday.open),h(5),L("ngModel",o.resInfo.days.wednesday.openingHours.start),h(3),L("ngModel",o.resInfo.days.wednesday.openingHours.end),h(3),L("ngModel",o.resInfo.days.thursday.open),h(5),L("ngModel",o.resInfo.days.thursday.openingHours.start),h(3),L("ngModel",o.resInfo.days.thursday.openingHours.end),h(3),L("ngModel",o.resInfo.days.friday.open),h(5),L("ngModel",o.resInfo.days.friday.openingHours.start),h(3),L("ngModel",o.resInfo.days.friday.openingHours.end),h(3),L("ngModel",o.resInfo.days.saturday.open),h(5),L("ngModel",o.resInfo.days.saturday.openingHours.start),h(3),L("ngModel",o.resInfo.days.saturday.openingHours.end),h(3),L("ngModel",o.resInfo.days.sunday.open),h(5),L("ngModel",o.resInfo.days.sunday.openingHours.start),h(3),L("ngModel",o.resInfo.days.sunday.openingHours.end))},dependencies:[Ie,In,On,_i,ho,Mn,Si,Ei,Ze,pe,We,Oe],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;width:100%;margin:0;padding:0;overflow-y:auto}.topBar[_ngcontent-%COMP%]{margin-top:2%;width:100%;display:flex;margin-right:10px;height:10%;z-index:5;position:relative;flex-direction:row}.logo[_ngcontent-%COMP%]{width:15%}.logoimg[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.ParentContainer[_ngcontent-%COMP%]{background:#e5e8e2;width:100vw;height:100vh;overflow-y:auto;display:flex;flex-direction:column;align-items:center;z-index:0;overflow-x:hidden;position:relative}.container1[_ngcontent-%COMP%]{width:60vw;opacity:0;display:block;background-repeat:no-repeat;background-color:#e5e8e2;height:fit-content;border-radius:9px;z-index:5;transition:transform 1s ease,opacity .5s ease;position:absolute}.hidden[_ngcontent-%COMP%]{opacity:0!important;transform:translate(-100%)!important;pointer-events:none!important}.checkbox[_ngcontent-%COMP%]{width:100%;border-bottom:solid 1px;margin-bottom:5px}label[_ngcontent-%COMP%]{font-family:DM sans,sans-serif}.containerTitle[_ngcontent-%COMP%]{text-align:center;font-family:Georgia,serif;font-weight:700;z-index:10;position:relative;margin-bottom:30px;height:10%;font-size:370%}.quesBox[_ngcontent-%COMP%]{opacity:0;width:100%;margin-top:2%;transition:opacity 1s ease;border-radius:5px}.quesText[_ngcontent-%COMP%]:hover{transition:.7s ease;transform:scale(1.05);background-color:#d3d3d3}.form-check-input[_ngcontent-%COMP%]{border-radius:50%}.quesText[_ngcontent-%COMP%]{font-family:DM sans,sans-serif;margin-left:10px;margin-right:10px}.questions[_ngcontent-%COMP%]{width:100%}.container2[_ngcontent-%COMP%]{opacity:0;pointer-events:none;transition:transform 1s ease,opacity .5s ease;transform:translate(100%);position:absolute;background-repeat:no-repeat;height:fit-content;border-radius:9px;z-index:5;background-color:#e5e8e2;display:block;flex-direction:column;z-index:10;width:70%}.visible[_ngcontent-%COMP%]{opacity:1!important;transform:translate(0);pointer-events:all}.resInfoForm[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-control[_ngcontent-%COMP%]{background-color:#e5e8e2;border:solid lightgray 2px}.res[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px}.overallInfo[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.dayName[_ngcontent-%COMP%]{margin-bottom:5px;margin-top:5px}.NameLocationImg[_ngcontent-%COMP%]{position:relative;width:35%;background-color:#e5e8e2;padding:20px 60px 20px 20px;border-right:solid 1px}.predicOption[_ngcontent-%COMP%]{top:100%;left:0%;z-index:15;background-color:#fff;border:solid 1px;overflow-x:hidden;position:relative;width:100%}.predicOption[_ngcontent-%COMP%]:hover{background-color:#d3d3d3}.Leftelement[_ngcontent-%COMP%]{margin-bottom:20px;z-index:13}.time-inputs[_ngcontent-%COMP%]{padding:3px;margin-bottom:20px}.lastTimeInput[_ngcontent-%COMP%]{margin-bottom:0}.Openingschedule[_ngcontent-%COMP%]{font-size:large;font-weight:700;margin-bottom:10px}.time-inputsS[_ngcontent-%COMP%]{background-color:#e5e8e2;padding:20px 20px 0 60px;width:40%}.openFrom[_ngcontent-%COMP%]{margin-right:20px}.lolol[_ngcontent-%COMP%]{border:none;border-radius:50%!important}.time-slot[_ngcontent-%COMP%]{margin-right:25px;margin-left:9px;border-radius:5px;border:none;background-color:#e5e8e2}.nextSectionBtn[_ngcontent-%COMP%]{margin-top:20px;width:100%;display:flex;justify-content:center}.nextBtn[_ngcontent-%COMP%]{width:25%;height:fit-content;margin-top:20px;bottom:0;display:inline-flex;align-items:center;justify-content:center;padding:8px 16px;font-size:16px;font-weight:500;cursor:pointer;transition:all .3s ease;outline:none;-webkit-user-select:none;user-select:none;color:#fff;border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:#000;border-right-color:#000;border-bottom-color:#000;border-left-color:#000;border-radius:50px;background-color:#334625;box-shadow:7px 7px 8px #0003}.nextBtn[_ngcontent-%COMP%]:hover{transition:all .3s ease;transform:scale(1.1);background-color:#9ebb8d;color:#000}.previousbtn[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px;margin-top:20px}#googlebtn[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.warningText[_ngcontent-%COMP%]{font-size:small;color:red;width:fit-content}.googlebtnWarning[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.warningTextDiv[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:5px}"]});let n=e;return n})();var jd=["itemContainer"],qd=["collapsables"],Hd=["menueBox"],Wd=["menueTab"],Gd=["tabs"];function $d(n,e){n&1&&(a(0,"div",82)(1,"h2"),u(2," There are no orders yet !"),l()())}function zd(n,e){if(n&1&&(a(0,"div",100),u(1),l()),n&2){let t=e.$implicit;h(),kr(" ",t.name," X",t.quantity," ")}}function Qd(n,e){if(n&1){let t=H();a(0,"div",91)(1,"div",92),u(2),l(),a(3,"div",93),T(4,zd,2,2,"div",94),l(),a(5,"div",95),u(6),l(),a(7,"div",96),u(8),Ae(9,"date"),l(),a(10,"div",96),u(11),Ae(12,"date"),l(),a(13,"div",97)(14,"div",98),E("click",function(){let r=y(t).$implicit,o=V(2);return _(o.advanceOrder(r.id))}),u(15,"Process "),g(16,"i",99),l()()()}if(n&2){let t=e.$implicit;h(2),N(" ",t.id," "),h(2),b("ngForOf",t.items),h(2),N(" ",t.status," "),h(2),N(" ",Xe(9,5,t.createdAt," MM/dd, h:mm a")," "),h(3),N(" ",Xe(12,8,t.updatedAt," MM/dd, h:mm a")," ")}}function Jd(n,e){if(n&1&&(a(0,"div",83)(1,"div",84)(2,"div",85),u(3," Order ID "),l(),a(4,"div",86),u(5," Items bought "),l(),a(6,"div",87),u(7," Order Status "),l(),a(8,"div",88),u(9," Time Ordered "),l(),a(10,"div",88),u(11," Last Modified "),l(),a(12,"div",89),u(13," Advance button "),l()(),T(14,Qd,17,11,"div",90),l()),n&2){let t=V();h(14),b("ngForOf",t.ordersRetrieved)}}function Yd(n,e){n&1&&(a(0,"div",117),g(1,"img",118),l())}function Kd(n,e){n&1&&(a(0,"div",119),g(1,"img",120),l())}function Xd(n,e){n&1&&(a(0,"div",121),g(1,"img",122),l())}function Zd(n,e){n&1&&(a(0,"div",123),g(1,"img",124),l())}function eu(n,e){if(n&1){let t=H();a(0,"div",101)(1,"div",102)(2,"div",103),g(3,"img",104),l(),a(4,"div",105),u(5),l()(),a(6,"div",106)(7,"div",107)(8,"div",108),u(9),l(),a(10,"div",109)(11,"button",81),E("click",function(){let r=y(t).$implicit,o=V();return _(o.deleteItem(r.name,r.description,r.type))}),g(12,"i",110),l()()(),a(13,"div",111),u(14),l(),a(15,"div",112),T(16,Yd,2,0,"div",113)(17,Kd,2,0,"div",114)(18,Xd,2,0,"div",115)(19,Zd,2,0,"div",116),l()()()}if(n&2){let t=e.$implicit;h(3),b("src","http://localhost:3000/"+t.imgPath,ve),h(2),N("$",t.price,".00"),h(4),j(t.name),h(5),j(t.description),h(2),b("ngIf",t.vegan),h(),b("ngIf",t.vegetarian),h(),b("ngIf",t.lactoseFree),h(),b("ngIf",t.glutenFree)}}function tu(n,e){n&1&&(a(0,"div",117),g(1,"img",118),l())}function nu(n,e){n&1&&(a(0,"div",119),g(1,"img",120),l())}function iu(n,e){n&1&&(a(0,"div",121),g(1,"img",122),l())}function ru(n,e){n&1&&(a(0,"div",123),g(1,"img",124),l())}function ou(n,e){if(n&1){let t=H();a(0,"div",125)(1,"div",102)(2,"div",103),g(3,"img",104),l(),a(4,"div",105),u(5),l()(),a(6,"div",106)(7,"div",107)(8,"div",108),u(9),l(),a(10,"div",109)(11,"button",81),E("click",function(){let r=y(t).$implicit,o=V();return _(o.deleteItem(r.name,r.description,r.type))}),g(12,"i",110),l()()(),a(13,"div",111),u(14),l(),a(15,"div",112),T(16,tu,2,0,"div",113)(17,nu,2,0,"div",114)(18,iu,2,0,"div",115)(19,ru,2,0,"div",116),l()()()}if(n&2){let t=e.$implicit;h(3),b("src","http://localhost:3000/"+t.imgPath,ve),h(2),N("$",t.price,".00"),h(4),j(t.name),h(5),j(t.description),h(2),b("ngIf",t.vegan),h(),b("ngIf",t.vegetarian),h(),b("ngIf",t.lactoseFree),h(),b("ngIf",t.glutenFree)}}function su(n,e){n&1&&(a(0,"div",117),g(1,"img",118),l())}function au(n,e){n&1&&(a(0,"div",119),g(1,"img",120),l())}function lu(n,e){n&1&&(a(0,"div",121),g(1,"img",122),l())}function cu(n,e){n&1&&(a(0,"div",123),g(1,"img",124),l())}function du(n,e){if(n&1){let t=H();a(0,"div",126)(1,"div",102)(2,"div",103),g(3,"img",104),l(),a(4,"div",105),u(5),l()(),a(6,"div",106)(7,"div",107)(8,"div",108),u(9),l(),a(10,"div",109)(11,"button",81),E("click",function(){let r=y(t).$implicit,o=V();return _(o.deleteItem(r.name,r.description,r.type))}),g(12,"i",110),l()()(),a(13,"div",111),u(14),l(),a(15,"div",112),T(16,su,2,0,"div",113)(17,au,2,0,"div",114)(18,lu,2,0,"div",115)(19,cu,2,0,"div",116),l()()()}if(n&2){let t=e.$implicit;h(3),b("src","http://localhost:3000/"+t.imgPath,ve),h(2),N("$",t.price,".00"),h(4),j(t.name),h(5),j(t.description),h(2),b("ngIf",t.vegan),h(),b("ngIf",t.vegetarian),h(),b("ngIf",t.lactoseFree),h(),b("ngIf",t.glutenFree)}}var Ca=(()=>{let e=class e{constructor(i,r,o,s,d,c,p){this.http=i,this.router=r,this.route=o,this.cdr=s,this.renderer=d,this.el=c,this.platformId=p,this.menueItem={type:"",name:"",description:"",price:0,halal:!1,vegan:!1,vegetarian:!1,glutenFree:!1,lactoseFree:!1,imgPath:""},this.ordersRetrieved=[],this.orderStatus=["Submitted, Unpaid","paid","Accepted & being prepared","Ready to collect!","Collected"],this.selectedFile=null,console.log("constructor called"),mn(()=>{this.initilizeWebSockets()})}ngOnInit(){Me(this.platformId)&&(console.log("restaurant admin intilized, about to call the admin package and get orders"),this.LoadRestaurantAdminPackage(),this.getOrders())}ngOnDestroy(){this.socket&&this.socket.disconnect}initilizeWebSockets(){this.socket=st(R.backendURL,{withCredentials:!0}),this.socket.on("connect",()=>{this.socket.emit("restaurantConnected"),console.log("Restaurant front end connected to back end")}),this.socket.on("orderPaid&Placed",i=>{console.log("New Order Placed:",i.orderJSON),alert(i.message)})}LoadRestaurantAdminPackage(){this.http.post(`${R.backendURL}/LoadRestaurantAdminPackage`,{userType:"admin"},{withCredentials:!0}).subscribe({next:i=>{i.success?(this.restaurantName=i.restaurantName||null,this.menue2=JSON.parse(i.menue)||null,this.mealsArray=this.menue2.meals.map(r=>JSON.parse(r))||null,this.drinksArray=this.menue2.drinks.map(r=>JSON.parse(r))||null,this.desertsArray=this.menue2.deserts.map(r=>JSON.parse(r))||null):alert(i.message)},error:i=>{console.error("error: ",i)}})}onFileSelected(i){this.selectedFile=i.target.files[0]}submitMenueItem(i){let r=this.itemContainer.nativeElement;this.menueItem.type=r.querySelector("[name='itemType']").value,this.menueItem.name=r.querySelector("[name='itemName']").value,this.menueItem.price=parseFloat(r.querySelector("[name='itemPrice']").value),this.menueItem.halal=r.querySelector("[name='halal']").checked,this.menueItem.vegan=r.querySelector("[name='vegan']").checked,this.menueItem.vegetarian=r.querySelector("[name='vegetarian']").checked,this.menueItem.glutenFree=r.querySelector("[name='glutenFree']").checked,this.menueItem.lactoseFree=r.querySelector("[name='lactoseFree']").checked,this.menueItem.description=r.querySelector("[name='itemDescription']").value;let o=new FormData;o.append("menueItem",JSON.stringify(this.menueItem)),o.append("image",this.selectedFile,this.selectedFile.name),this.validate()&&this.http.post(`${R.backendURL}/submitMenue`,o,{withCredentials:!0}).subscribe({next:s=>{s.success?alert(s.message):console.log("unexpected error: ",s)},error:s=>{console.error("Error: ",s)}})}deleteItem(i,r,o){console.log(`name: ${i}, description: ${r}, and menue id in question ${this.menue2.id}`),this.http.post(`${R.backendURL}/deleteItem`,{menueId:this.menue2.id,itemName:i,itemDescription:r,type:o},{withCredentials:!0}).subscribe({next:s=>{s.success?alert("item deleted from menue successfully"):alert(s.message)},error:s=>{console.error("error: ",s)}})}deleteRestaurant(){this.http.post(`${R.backendURL}/deleteRestaurant`,{userId:"variablePlaceHolder"},{withCredentials:!0}).subscribe({next:i=>{i.success?(alert("restaurant deleted successfully"),this.router.navigateByUrl(i.redirectUrl)):alert(i.message)},error:i=>{console.error("error: ",i)}})}getOrders(){this.http.post(`${R.backendURL}/getOrders`,{userId:"variablePlaceHolder"},{withCredentials:!0}).subscribe({next:i=>{i.success?(this.ordersRetrieved=i.orders,this.ordersRetrieved.forEach(r=>{r.items=JSON.parse(r.items)})):alert(i.message)},error:i=>{console.error("error: ",i)}})}advanceOrder(i){console.log("advance order called!"),this.http.post(`${R.backendURL}/advanceOrder`,{orderId:i},{withCredentials:!0}).subscribe({next:r=>{if(r.success){console.log("order status updates successfully in the back end");let o=this.ordersRetrieved.find(s=>s.id===i);for(let s=0;s<this.orderStatus.length;s++)if(o.status===this.orderStatus[s]&&s!=this.orderStatus.length-1){o.status=this.orderStatus[s+1];break}}else alert(r.message)},error:r=>{console.error("error: ",r)}})}logout(i){console.log("logout attempt initiated!"),this.http.post(`${R.backendURL}/logout`,{id_token:i.credential},{withCredentials:!0}).subscribe({next:r=>{r.success?this.router.navigateByUrl(r.redirectUrl):console.log("unexpected json format! ",r)},error:r=>{console.error("Error: ",r)}})}showDiv(i,r){this.collapsables.forEach(d=>{d.nativeElement.style.display="none"});let o=document.getElementById(i);o?o.style.display="flex":console.log("there is no div with that id"),this.tabs.forEach(d=>{d.nativeElement.style.backgroundColor="#bcd9ab",d.nativeElement.style.boxShadow=""});let s=document.getElementById(r);s?(s.style.boxShadow="15px 15px 8px 0 rgba(0, 0, 0, 0.2)",s.style.backgroundColor="#9ebb8d"):console.log("there is no div with that id")}showMenueBox(i,r){console.log("received box id and tab id: ",i,r),this.menueBoxes.forEach(d=>{d.nativeElement.style.display="none"}),this.MenueTabs.forEach(d=>{d.nativeElement.style.backgroundColor="#bcd9ab",d.nativeElement.style.boxShadow="none",d.nativeElement.style.height="50%"}),console.log("looped through boxes and closed all of them");let o=document.getElementById(i),s=document.getElementById(r);console.log("here is display box element: ",o),console.log("here is tab element: ",s),o&&s?(o.style.display="flex",s.style.backgroundColor="#9ebb8d",s.style.boxShadow="15px 15px 8px 0 rgba(0, 0, 0, 0.2)",s.style.height="70%"):console.log("error displaying requested menue box and changing tab style")}validate(){if(this.menueItem.name.length>35||this.menueItem.name.length<3){let i=document.getElementById("nameLabel");return i.style.color="red",console.log(this.menueItem.name),console.log("name is now red"),!1}if(this.menueItem.description.length>250){let i=document.getElementById("desLabel");return i.style.color="red",console.log("description is now red"),!1}if(typeof this.menueItem.price!="number"||this.menueItem.price<0){let i=document.getElementById("priceLabel");return i.style.color="red",console.log("price is now red"),!1}return!0}};e.\u0275fac=function(r){return new(r||e)(x(me),x(ge),x(Ge),x(gn),x(Fe),x(Ke),x(ke))},e.\u0275cmp=ie({type:e,selectors:[["app-restaurant-admin"]],viewQuery:function(r,o){if(r&1&&(J(jd,7),J(qd,5),J(Hd,5),J(Wd,5),J(Gd,5)),r&2){let s;Y(s=K())&&(o.itemContainer=s.first),Y(s=K())&&(o.collapsables=s),Y(s=K())&&(o.menueBoxes=s),Y(s=K())&&(o.MenueTabs=s),Y(s=K())&&(o.tabs=s)}},standalone:!0,features:[oe],decls:133,vars:6,consts:[["tabs",""],["collapsables",""],["menueTab",""],["menueBox",""],["menueForm","ngForm"],["itemContainer",""],["itemDiv",""],[1,"mainDiv"],[1,"topBar"],[1,"logo"],["src","http://localhost:3000/uploads/newlogo33.png","alt","Logo",1,"logoimg"],[1,"logoutDiv"],[1,"logoutBtn",3,"click"],[1,"mainContent"],[1,"topPortion"],[1,"resNameHeading"],[1,"bottomPortion"],[1,"sideBar"],[1,"placePusher"],["id","orderTab",1,"tabs",3,"click"],[1,"label","Ltab"],["id","menueTab",1,"menue","tabs",3,"click"],["id","statsTab",1,"stats","tabs",3,"click"],["id","settingsTab",1,"settings","tabs",3,"click"],[1,"contentB"],["id","ordersDiv",1,"ordersContainer","collapsables"],[1,"ordersNavBar"],["class","noOrdersYet",4,"ngIf"],["class","orders",4,"ngIf"],["id","menueDiv",1,"menueTab","collapsables"],[1,"navBar"],["id","mealsTab",1,"navBarLabelDiv",3,"click"],[1,"navBarLabel","label2"],["id","drinksTab",1,"navBarLabelDiv",3,"click"],["id","desertsTab",1,"navBarLabelDiv",3,"click"],["id","addItemTab",1,"navBarLabelDiv",3,"click"],[1,"contentC"],["id","mealsBox",1,"mealsContainer"],["class","mealsContent itemS",4,"ngFor","ngForOf"],["id","drinksBox",1,"drinksContainer"],["class","drinksContent itemS",4,"ngFor","ngForOf"],["id","desertsBox",1,"desertsContainer"],["class","desertsContent itemS",4,"ngFor","ngForOf"],["id","addItemBox",1,"additemContent"],[1,"formDiv"],[3,"ngSubmit"],[1,"menu"],[1,"item"],[1,"form-group","item"],["for","itemType",1,"addItemFieldLabel"],["id","itemType","name","itemType",1,"field"],["value","meal"],["value","drink"],["value","desert"],["id","nameLabel","for","itemName",1,"addItemFieldLabel"],["type","text","name","itemName","required","",1,"field"],["id","desLabel","for","itemDescription",1,"addItemFieldLabel"],["type","text","name","itemDescription","required","",1,"field","des"],["id","priceLabel","for","itemPrice",1,"addItemFieldLabel"],["type","number","name","itemPrice","required","",1,"field"],[1,"checkinput"],["type","checkbox","name","halal","required","",1,"checkboxB"],["for","halal",1,"addItemFieldLabel"],["type","checkbox","name","vegan","required","",1,"checkboxB"],["for","vegan",1,"addItemFieldLabel"],["type","checkbox","name","vegetarian","required","",1,"checkboxB"],["for","vegetarian",1,"addItemFieldLabel"],["type","checkbox","name","glutenFree","required","",1,"checkboxB"],["for","glutenFree",1,"addItemFieldLabel"],["type","checkbox","name","lactoseFree","required","",1,"checkboxB"],["for","lactoseFree",1,"addItemFieldLabel"],[1,"checkinput","imgupdiv"],["for","itemimg",1,"addItemFieldLabel","imglabel"],["type","file","name","itemimg","accept","image/*","required","",1,"",3,"change"],[1,"submitBtndiv"],["type","submit",1,"submitbtn"],["id","statsDiv",1,"stats","collapsables"],[1,"contentC","std"],["id","settingsDiv",1,"settings","collapsables"],[1,"contentC","dbd"],[1,"deleteresdiv"],[1,"deletebtn",3,"click"],[1,"noOrdersYet"],[1,"orders"],[1,"orderHeaders"],[1,"orderIDCol","ordersTableHeader"],[1,"itemList","ordersTableHeader"],[1,"orderstatus","ordersTableHeader"],[1,"modTime","ordersTableHeader"],[1,"nextbuttonDiv","ordersTableHeader"],["class","orderRow",4,"ngFor","ngForOf"],[1,"orderRow"],[1,"orderIDCol","ordermember"],[1,"itemList","ordermember"],["class","itemsss",4,"ngFor","ngForOf"],[1,"orderstatus","ordermember"],[1,"modTime","ordermember"],[1,"advancebtndiv","ordermember"],[1,"advancebtn",3,"click"],[1,"fas","fa-arrow-right"],[1,"itemsss"],[1,"mealsContent","itemS"],[1,"imgandprice"],[1,"image","itemImageDiv"],["alt","Description of image",1,"itemImage",3,"src"],[1,"Mprice","itemPrice"],[1,"itemdata"],[1,"itemHeaders"],[1,"Mname","itemName"],[1,"deletebtndiv"],[1,"fas","fa-xmark"],[1,"Mdescription","itemDescription"],[1,"checks"],["class","Mvegan check itemVegan",4,"ngIf"],["class","Mvegetarian check itemVegetarian",4,"ngIf"],["class","Mlactosefree check itemLactose",4,"ngIf"],["class","Mglutenfree check itemGluten",4,"ngIf"],[1,"Mvegan","check","itemVegan"],["src","http://localhost:3000/uploads/vegan.png","alt","Logo",1,"iconimg"],[1,"Mvegetarian","check","itemVegetarian"],["src","http://localhost:3000/uploads/vegetarian.png","alt","Logo",1,"iconimg"],[1,"Mlactosefree","check","itemLactose"],["src","http://localhost:3000/uploads/lactose.png","alt","Logo",1,"iconimg"],[1,"Mglutenfree","check","itemGluten"],["src","http://localhost:3000/uploads/gluten.png","alt","Logo",1,"iconimg"],[1,"drinksContent","itemS"],[1,"desertsContent","itemS"]],template:function(r,o){if(r&1){let s=H();a(0,"div",7)(1,"div",8)(2,"div",9),g(3,"img",10),l(),a(4,"div",11)(5,"button",12),E("click",function(){return y(s),_(o.logout("logout requested!"))}),u(6,"Log Out"),l()()(),a(7,"div",13)(8,"div",14)(9,"h1",15),u(10),l()(),a(11,"div",16)(12,"div",17),g(13,"div",18),a(14,"div",19,0),E("click",function(){return y(s),_(o.showDiv("ordersDiv","orderTab"))}),a(16,"label",20),u(17,"Orders"),l()(),a(18,"div",21,0),E("click",function(){return y(s),_(o.showDiv("menueDiv","menueTab"))}),a(20,"label",20),u(21,"Menue"),l()(),a(22,"div",22,0),E("click",function(){return y(s),_(o.showDiv("statsDiv","statsTab"))}),a(24,"label",20),u(25,"Statistics"),l()(),a(26,"div",23,0),E("click",function(){return y(s),_(o.showDiv("settingsDiv","settingsTab"))}),a(28,"label",20),u(29,"Settings"),l()()(),a(30,"div",24)(31,"div",25,1),g(33,"div",26),T(34,$d,3,0,"div",27)(35,Jd,15,1,"div",28),l(),a(36,"div",29,1)(38,"div",30)(39,"div",31,2),E("click",function(){return y(s),_(o.showMenueBox("mealsBox","mealsTab"))}),a(41,"label",32),u(42,"Meals Menue"),l()(),a(43,"div",33,2),E("click",function(){return y(s),_(o.showMenueBox("drinksBox","drinksTab"))}),a(45,"label",32),u(46,"Drinks Menue"),l()(),a(47,"div",34,2),E("click",function(){return y(s),_(o.showMenueBox("desertsBox","desertsTab"))}),a(49,"label",32),u(50,"Desserts Menue"),l()(),a(51,"div",35,2),E("click",function(){return y(s),_(o.showMenueBox("addItemBox","addItemTab"))}),a(53,"label",32),u(54,"Add Menue Item"),l()()(),a(55,"div",36)(56,"div",37,3),T(58,eu,20,8,"div",38),l(),a(59,"div",39,3),T(61,ou,20,8,"div",40),l(),a(62,"div",41,3),T(64,du,20,8,"div",42),l(),a(65,"div",43,3)(67,"div",44)(68,"form",45,4),E("ngSubmit",function(){y(s);let c=Sr(69);return _(o.submitMenueItem(c))}),a(70,"div",46)(71,"div",47,5)(73,"div",48,6)(75,"label",49),u(76,"Item Type"),l(),a(77,"select",50)(78,"option",51),u(79,"Meal"),l(),a(80,"option",52),u(81,"drink"),l(),a(82,"option",53),u(83,"desert"),l()(),a(84,"label",54),u(85,"Item Name"),l(),g(86,"input",55),a(87,"label",56),u(88,"Description/Ingredients"),l(),g(89,"textarea",57),a(90,"label",58),u(91,"Price"),l(),g(92,"input",59),a(93,"div",60),g(94,"input",61),a(95,"label",62),u(96,"Halal"),l()(),a(97,"div",60),g(98,"input",63),a(99,"label",64),u(100,"Vegan"),l()(),a(101,"div",60),g(102,"input",65),a(103,"label",66),u(104,"Vegetarian"),l()(),a(105,"div",60),g(106,"input",67),a(107,"label",68),u(108,"Gluten Free"),l()(),a(109,"div",60),g(110,"input",69),a(111,"label",70),u(112,"Lactose Free"),l()(),a(113,"div",71)(114,"label",72),u(115,"Item Image"),l(),a(116,"input",73),E("change",function(c){return y(s),_(o.onFileSelected(c))}),l()(),a(117,"div",74)(118,"button",75),u(119,"Submit menue Item"),l()()()()()()()()()(),a(120,"div",76,1),g(122,"div",30),a(123,"div",77)(124,"h1"),u(125,"Statistics features coming soon"),l()()(),a(126,"div",78,1),g(128,"div",30),a(129,"div",79)(130,"div",80)(131,"button",81),E("click",function(){return y(s),_(o.deleteRestaurant())}),u(132,"Delete restaurant"),l()()()()()()()()}r&2&&(h(10),j(o.restaurantName),h(24),b("ngIf",!o.ordersRetrieved||o.ordersRetrieved.length===0),h(),b("ngIf",o.ordersRetrieved&&o.ordersRetrieved.length>0),h(23),b("ngForOf",o.mealsArray),h(3),b("ngForOf",o.drinksArray),h(3),b("ngForOf",o.desertsArray))},dependencies:[Ie,In,bo,xo,Mn,Ze,pe,We,Oe,Ar],styles:['.mainDiv[_ngcontent-%COMP%]{background:#e5e8e2;width:100vw;height:100vh;display:flex;flex-direction:column}.topBar[_ngcontent-%COMP%]{width:100%;display:flex;margin-top:2%;margin-right:10px;height:10%;position:relative;flex-direction:row;justify-content:space-between}.topPortion[_ngcontent-%COMP%]{width:100%;height:10%;display:flex;justify-content:center}.resNameHeading[_ngcontent-%COMP%]{border-bottom:solid 1px}.mainContent[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:100%;height:85%;border-radius:10px}.bottomPortion[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;width:90%;height:85%;border-radius:10px}.contentB[_ngcontent-%COMP%]{width:70%;background-color:#9ebb8d;border-radius:9px}.logo[_ngcontent-%COMP%]{width:15%}.logoimg[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.logoutDiv[_ngcontent-%COMP%]{width:10%;display:flex;justify-content:center;align-items:center}.logoutBtn[_ngcontent-%COMP%]{margin-top:20px;bottom:0;display:inline-flex;align-items:center;justify-content:center;padding:8px 16px;font-size:16px;font-weight:500;cursor:pointer;transition:all .3s ease;outline:none;-webkit-user-select:none;user-select:none;color:#fff;border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:#000;border-right-color:#000;border-bottom-color:#000;border-left-color:#000;border-radius:4px;background-color:#334625;box-shadow:7px 7px 8px #0003}.logoutBtn[_ngcontent-%COMP%]:hover{transition:all .3s ease;transform:scale(1.1);background-color:#4b6134}.label[_ngcontent-%COMP%]{font-family:lato,sans-serif;font-weight:700;transition:.3s ease}.label[_ngcontent-%COMP%]:hover{scale:1.2}.sideBar[_ngcontent-%COMP%]{width:10%;border-radius:10px 0% 0% 10px;margin-left:2.5%}.placePusher[_ngcontent-%COMP%]{height:20%}.Ltab[_ngcontent-%COMP%]{text-align:center;font-size:large;font-weight:700}.tabs[_ngcontent-%COMP%]{margin-bottom:10px;background-color:#9ebb8d;border-top-left-radius:9px;border-bottom-left-radius:9px;width:100%;height:15%;display:flex;justify-content:center;align-items:center;transition:.3s ease}.noOrdersYet[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;background-color:#9ebb8d;border-radius:9px;box-shadow:15px 15px 8px #0003;align-items:center}.orders[_ngcontent-%COMP%]{background-color:#9ebb8d;width:100%;height:100%;display:flex;box-shadow:15px 15px 8px #0003;border-radius:9px;overflow:auto;scrollbar-width:none;-ms-overflow-style:none;flex-direction:column}.orders[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.advancebtn[_ngcontent-%COMP%]{cursor:pointer}.menueTab[_ngcontent-%COMP%]{background-color:#00f}.mealsContainer[_ngcontent-%COMP%]{display:flex}.drinksContainer[_ngcontent-%COMP%], .desertsContainer[_ngcontent-%COMP%]{display:none}.additemContent[_ngcontent-%COMP%]{display:none;margin:10px;flex-direction:row;width:100%;justify-content:center}.formDiv[_ngcontent-%COMP%]{display:flex;justify-content:center;width:70%;height:fit-content}.collapsables[_ngcontent-%COMP%]{display:none;flex-direction:column;background-color:#e5e8e2;width:100%;height:100%;border-top-right-radius:9px;border-bottom-right-radius:9px}.ordersContainer[_ngcontent-%COMP%]{display:flex}.ordersNavBar[_ngcontent-%COMP%], .navBar[_ngcontent-%COMP%]{width:100%;height:20%;background-color:transparent;display:flex;align-items:flex-end}.navBarLabelDiv[_ngcontent-%COMP%]{margin-left:10px;display:flex;height:50%;width:23%;justify-content:center;align-items:center;background-color:#bcd9ab;border-top-left-radius:7px;border-top-right-radius:7px;transition:.3s ease}.label2[_ngcontent-%COMP%]{font-family:lato,sans-serif;font-weight:700;transition:.3s ease}.contentC[_ngcontent-%COMP%]{background-color:#9ebb8d;width:100%;height:100%;display:flex;box-shadow:15px 15px 8px #0003;border-radius:9px;overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.contentC[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.itemS[_ngcontent-%COMP%]{display:flex;height:50%;width:50%;margin:20px;flex-direction:row;border-radius:9px;border:solid 1px black;background-color:#f0e6e6;box-shadow:7px 7px 8px #0003}.imgandprice[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:40%;border-right:1px solid black}.itemImageDiv[_ngcontent-%COMP%]{display:flex;border-top-left-radius:9px;border-bottom-left-radius:9px;width:100%;height:85%;margin-right:5px}.itemImage[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-top-left-radius:9px;border-bottom:solid 1px black}.orderHeaders[_ngcontent-%COMP%]{display:flex;height:fit-content;width:100%;flex-direction:row;margin:20px 10px 10px 20px}.ordersTableHeader[_ngcontent-%COMP%]{display:flex;justify-content:left;align-items:center;font-family:Georgia,serif;font-weight:700;border-bottom:1px solid black}.orderIDCol[_ngcontent-%COMP%]{width:10%}.itemList[_ngcontent-%COMP%]{width:26%;display:flex;flex-direction:column;align-items:flex-start}.orderstatus[_ngcontent-%COMP%], .timeOrdered[_ngcontent-%COMP%], .modTime[_ngcontent-%COMP%]{width:16%}.orderRow[_ngcontent-%COMP%]{display:flex;justify-content:left;align-items:flex-start;font-family:DM sans,serif;margin:10px 10px 15px 20px;width:100%}.orderRow[_ngcontent-%COMP%]:nth-child(2n){background-color:#bcd9ab}.itemsss[_ngcontent-%COMP%]{width:100%}.itemdata[_ngcontent-%COMP%]{display:flex;width:60%;flex-direction:column;margin-left:5px;margin-top:10px}.itemHeaders[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;flex-direction:row;border-bottom:solid grey 1px}.itemName[_ngcontent-%COMP%]{font-weight:700;font-family:Georgia,serif;font-size:large;width:100%;margin-left:10px;display:flex;justify-content:left;align-items:center}.itemDescription[_ngcontent-%COMP%]{font-family:DM sans,sans-serif;font-size:small;width:100%;margin-left:10px;margin-top:10px;padding-right:10px}.itemPrice[_ngcontent-%COMP%]{margin-top:5px;display:flex;width:100%;height:15%;justify-content:center;font-family:"lato" sans-serif;font-weight:700;font-size:large}.checks[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;height:20%;width:100%;margin-top:10px}.check[_ngcontent-%COMP%]{margin:5px 5px 5px 10px;height:100%;width:25%;transition:transform .3s ease}.check[_ngcontent-%COMP%]:hover{transform:scale(1.8)}.iconimg[_ngcontent-%COMP%]{object-fit:contain;height:100%;width:100%}.itemHalal[_ngcontent-%COMP%]{font-weight:700}.deletebtndiv[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;height:fit-content}.dbd[_ngcontent-%COMP%]{justify-content:center;align-items:center}.std[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.deleteresdiv[_ngcontent-%COMP%]{display:flex;margin:20px;justify-content:center}.deletebtn[_ngcontent-%COMP%]{bottom:0;display:inline-flex;align-items:center;justify-content:center;padding:8px 16px;font-size:large;font-weight:500;cursor:pointer;transition:all .3s ease;outline:none;-webkit-user-select:none;user-select:none;color:red;border:none;border-radius:4px;background-color:transparent}.deletebtn[_ngcontent-%COMP%]:hover{transition:all .3s ease;background-color:red;color:#000}.menu[_ngcontent-%COMP%]{width:100%;height:fit-content;background-color:#f0e6e6;border-radius:9px;box-shadow:7px 7px 8px #0003;padding:10px}.item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.addItemFieldLabel[_ngcontent-%COMP%]{font-weight:700;font-family:"lato" sans-serif}.checkinput[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:row;margin-bottom:10px}.checkinput[_ngcontent-%COMP%]:last-child{flex-direction:column}.checkboxB[_ngcontent-%COMP%]{margin-right:5px}.imgupdiv[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column}.imglabel[_ngcontent-%COMP%]{margin-bottom:10px}.submitbtn[_ngcontent-%COMP%]{bottom:0;display:inline-flex;align-items:center;justify-content:center;padding:8px 16px;font-size:16px;font-weight:500;cursor:pointer;transition:all .3s ease;outline:none;-webkit-user-select:none;user-select:none;color:#fff;border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:#000;border-right-color:#000;border-bottom-color:#000;border-left-color:#000;border-radius:4px;background-color:#334625;box-shadow:7px 7px 8px #0003}.submitBtndiv[_ngcontent-%COMP%]{display:flex;justify-content:center}.submitbtn[_ngcontent-%COMP%]:hover{transition:all .3s ease;transform:scale(1.1);background-color:#9ebb8d;color:#000}.field[_ngcontent-%COMP%]{margin-bottom:20px;border-radius:9px}.des[_ngcontent-%COMP%]{height:150px;white-space:pre-wrap}']});let n=e;return n})();var uu=["menueBox"],hu=["tabs"];function fu(n,e){if(n&1){let t=H();a(0,"div",54)(1,"div",12),u(2),l(),a(3,"div",13),u(4),l(),a(5,"div",14)(6,"div",55),E("click",function(){let r=y(t).$implicit,o=V();return _(o.dlt(r.name,r.description,r.unit_amount.value))}),g(7,"i",56),l(),a(8,"div",57),u(9),l(),a(10,"div",58),E("click",function(){let r=y(t).$implicit,o=V();return _(o.addToCart(r.name,r.description,r.unit_amount.value))}),g(11,"i",59),l()()()}if(n&2){let t=e.$implicit;h(2),j(t.name),h(2),N("$",t.unit_amount.value,".00"),h(5),j(t.quantity)}}function pu(n,e){if(n&1&&(a(0,"div",60)(1,"div",61),u(2),l()()),n&2){let t=V();h(2),N("Total Price: $",t.getTotal(),".00")}}function mu(n,e){if(n&1){let t=H();a(0,"div",62)(1,"div",63),E("click",function(){y(t);let r=V();return _(r.checkout(r.getTotal()))}),u(2,"Checkout"),l()()}}function gu(n,e){n&1&&(a(0,"label",64),u(1,"OPEN"),l())}function yu(n,e){n&1&&(a(0,"label",65),u(1,"CLOSED"),l())}function _u(n,e){n&1&&(a(0,"div",81),g(1,"img",82),l())}function vu(n,e){n&1&&(a(0,"div",83),g(1,"img",84),l())}function bu(n,e){n&1&&(a(0,"div",85),g(1,"img",86),l())}function Cu(n,e){n&1&&(a(0,"div",87),g(1,"img",88),l())}function xu(n,e){if(n&1){let t=H();a(0,"div",66)(1,"div",67)(2,"div",68),g(3,"img",69),l(),a(4,"div",70),u(5),l(),a(6,"div",71),E("click",function(){let r=y(t).$implicit,o=V();return _(o.addToCart(r.name,r.description,r.price))}),u(7,"add to cart"),l()(),a(8,"div",72)(9,"div",73)(10,"div",74),u(11),l()(),a(12,"div",75),u(13),l(),a(14,"div",76),T(15,_u,2,0,"div",77)(16,vu,2,0,"div",78)(17,bu,2,0,"div",79)(18,Cu,2,0,"div",80),l()()()}if(n&2){let t=e.$implicit;h(3),b("src","http://localhost:3000/"+t.imgPath,ve),h(2),N("$",t.price,".00"),h(6),j(t.name),h(2),j(t.description),h(2),b("ngIf",t.vegan),h(),b("ngIf",t.vegetarian),h(),b("ngIf",t.lactoseFree),h(),b("ngIf",t.glutenFree)}}function wu(n,e){n&1&&(a(0,"div",81),g(1,"img",82),l())}function Eu(n,e){n&1&&(a(0,"div",83),g(1,"img",84),l())}function Su(n,e){n&1&&(a(0,"div",85),g(1,"img",86),l())}function ku(n,e){n&1&&(a(0,"div",87),g(1,"img",88),l())}function Ou(n,e){if(n&1){let t=H();a(0,"div",89)(1,"div",67)(2,"div",68),g(3,"img",69),l(),a(4,"div",70),u(5),l(),a(6,"div",71),E("click",function(){let r=y(t).$implicit,o=V();return _(o.addToCart(r.name,r.description,r.price))}),u(7,"add to cart"),l()(),a(8,"div",72)(9,"div",73)(10,"div",74),u(11),l()(),a(12,"div",75),u(13),l(),a(14,"div",76),T(15,wu,2,0,"div",77)(16,Eu,2,0,"div",78)(17,Su,2,0,"div",79)(18,ku,2,0,"div",80),l()()()}if(n&2){let t=e.$implicit;h(3),b("src","http://localhost:3000/"+t.imgPath,ve),h(2),N("$",t.price,".00"),h(6),j(t.name),h(2),j(t.description),h(2),b("ngIf",t.vegan),h(),b("ngIf",t.vegetarian),h(),b("ngIf",t.lactoseFree),h(),b("ngIf",t.glutenFree)}}function Mu(n,e){n&1&&(a(0,"div",81),g(1,"img",82),l())}function Tu(n,e){n&1&&(a(0,"div",83),g(1,"img",84),l())}function Iu(n,e){n&1&&(a(0,"div",85),g(1,"img",86),l())}function Pu(n,e){n&1&&(a(0,"div",87),g(1,"img",88),l())}function Du(n,e){if(n&1){let t=H();a(0,"div",90)(1,"div",67)(2,"div",68),g(3,"img",69),l(),a(4,"div",70),u(5),l(),a(6,"div",71),E("click",function(){let r=y(t).$implicit,o=V();return _(o.addToCart(r.name,r.description,r.price))}),u(7,"add to cart"),l()(),a(8,"div",72)(9,"div",73)(10,"div",74),u(11),l()(),a(12,"div",75),u(13),l(),a(14,"div",76),T(15,Mu,2,0,"div",77)(16,Tu,2,0,"div",78)(17,Iu,2,0,"div",79)(18,Pu,2,0,"div",80),l()()()}if(n&2){let t=e.$implicit;h(3),b("src","http://localhost:3000/"+t.imgPath,ve),h(2),N("$",t.price,".00"),h(6),j(t.name),h(2),j(t.description),h(2),b("ngIf",t.vegan),h(),b("ngIf",t.vegetarian),h(),b("ngIf",t.lactoseFree),h(),b("ngIf",t.glutenFree)}}var xa=(()=>{let e=class e{constructor(i,r,o,s){this.route=i,this.router=r,this.http=o,this.platformId=s,this.orderArray=[]}ngOnInit(){Me(this.platformId)&&(this.route.queryParams.subscribe(i=>{this.restaurantId=i.restaurantId,this.distance=i.distance}),this.LoadRestaurantPackage(this.restaurantId))}LoadRestaurantPackage(i){this.http.post(`${R.backendURL}/LoadRestaurantAdminPackage`,{Id:i,userType:"consumer"},{withCredentials:!0}).subscribe({next:r=>{if(r.success){this.menue=JSON.parse(r.menue),this.mealsArray=this.menue.meals.map(s=>JSON.parse(s)),this.drinksArray=this.menue.drinks.map(s=>JSON.parse(s)),this.desertsArray=this.menue.deserts.map(s=>JSON.parse(s));let o=r.restaurant;this.restaurant=D({},o)}else alert(r.message)},error:r=>{console.error("error: ",r)}})}addToCart(i,r,o){console.log(i);for(let s=0;s<this.orderArray.length;s++)if(this.orderArray[s].name==i&&this.orderArray[s].unit_amount.value==o&&this.orderArray[s].description==r){this.orderArray[s].quantity++;return}this.orderArray.push({name:i,description:r,quantity:1,unit_amount:{currency_code:"AUD",value:o}})}dlt(i,r,o){for(let s=0;s<this.orderArray.length;s++)if(this.orderArray[s].name==i&&this.orderArray[s].unit_amount.value==o&&this.orderArray[s].description==r)if(this.orderArray[s].quantity>1){this.orderArray[s].quantity--;break}else{this.orderArray.splice(s,1);break}}getTotal(){let i=0;for(let r=0;r<this.orderArray.length;r++)i+=this.orderArray[r].quantity*this.orderArray[r].unit_amount.value;return i}logout(i){console.log("logout attempt initiated!"),this.http.post(`${R.backendURL}/logout`,{id_token:i.credential},{withCredentials:!0}).subscribe({next:r=>{r.success?this.router.navigateByUrl(r.redirectUrl):console.log("unexpected json format! ",r)},error:r=>{console.error("Error: ",r)}})}checkout(i){console.log(`restaurant id: ${this.restaurantId}`),console.log(JSON.stringify(this.orderArray)),this.orderArray.forEach(r=>{r.quantity=r.quantity.toString(),typeof r.unit_amount.value=="string"||(r.unit_amount.value=r.unit_amount.value.toFixed(2).toString())}),console.log(i.toFixed(2)),console.log(this.orderArray),this.http.post(`${R.backendURL}/placeOrder`,{restaurantId:this.restaurantId,status:"submitted, unpaid",orderArray:JSON.stringify(this.orderArray),totalPrice:i.toFixed(2)},{withCredentials:!0}).subscribe({next:r=>{r.success&&r.redirectUrl&&(window.location.href=r.redirectUrl)},error:r=>{console.error("error: ",r)}})}showDiv(i,r){this.menueContainer.forEach(d=>{d.nativeElement.style.display="none"});let o=document.getElementById(i);o?o.style.display="flex":console.log("there is no div with that id"),this.tabs.forEach(d=>{d.nativeElement.style.backgroundColor="#bcd9ab"});let s=document.getElementById(r);s?s.style.backgroundColor="#9ebb8d":console.log("there is no div with that id")}ShowCart(i){let r=document.getElementById(i);r&&(r.style.opacity="1",r.style.display="flex")}closeCart(i){let r=document.getElementById(i);r&&(r.style.opacity="0",r.style.display="none")}};e.\u0275fac=function(r){return new(r||e)(x(Ge),x(ge),x(me),x(ke))},e.\u0275cmp=ie({type:e,selectors:[["app-restaurant-page"]],viewQuery:function(r,o){if(r&1&&(J(uu,5),J(hu,5)),r&2){let s;Y(s=K())&&(o.menueContainer=s),Y(s=K())&&(o.tabs=s)}},standalone:!0,features:[oe],decls:72,vars:15,consts:[["tabs",""],["menueBox",""],[1,"mainDiv"],[1,"topBar"],[1,"logo"],["src","http://localhost:3000/uploads/newlogo33.png","alt","Logo",1,"logoimg"],[1,"logoutDiv"],[1,"cartIcon",3,"click"],[1,"badge"],[1,"fas","fa-shopping-cart"],["id","cart",1,"cart"],[1,"headers"],[1,"itemNameC"],[1,"itemPriceC"],[1,"quantityC"],[1,"closeCart",3,"click"],[1,"fas","fa-xmark"],[1,"repeatingItems"],["class","cartDivItems",4,"ngFor","ngForOf"],[1,"conclusionDiv"],["class","totalPriceC",4,"ngIf"],["class","checkoutC",4,"ngIf"],[1,"logoutBtn",3,"click"],[1,"mainContent"],[1,"coverPhoto"],["alt","Cover Image",1,"coverImg",3,"src"],[1,"resHeaders"],[1,"resName"],[1,"resTitle"],[1,"disrating"],[1,"OorC"],["class","opLabel",4,"ngIf"],["class","clLabel",4,"ngIf"],[1,"distance"],[1,"disLabel"],["width","39","height","39","src","https://img.icons8.com/fluency/48/google-maps-new.png","alt","google-maps-new"],[1,"rating"],[1,"star"],[1,"number"],[1,"menues"],[1,"tabsDiv"],[1,"firstHalf"],["id","mealsTab",1,"mealsTab","tab",3,"click"],[1,"label"],["id","drinksTab",1,"drinksTab","tab",3,"click"],["id","desertTab",1,"desertsTab","tab",3,"click"],[1,"secondHalf"],[1,"itemsDiv"],["id","mealsBox",1,"mealsContainer","menueContainer"],["class","mealsContent itemS",4,"ngFor","ngForOf"],["id","drinksBox",1,"drinksContainer","menueContainer"],["class","drinksContent itemS",4,"ngFor","ngForOf"],["id","desertsBox",1,"desertsContainer","menueContainer"],["class","desertsContent itemS",4,"ngFor","ngForOf"],[1,"cartDivItems"],[1,"dltBtnC",3,"click"],[1,"fas","fa-minus"],[1,"itemQuantityC"],[1,"addToCartBtnC",3,"click"],[1,"fas","fa-plus"],[1,"totalPriceC"],[1,"priceC"],[1,"checkoutC"],[1,"checkoutBtnC",3,"click"],[1,"opLabel"],[1,"clLabel"],[1,"mealsContent","itemS"],[1,"imgandprice"],[1,"image","itemImageDiv"],["alt","Description of image",1,"itemImage",3,"src"],[1,"Mprice","itemPrice"],[1,"addToCartBtn",3,"click"],[1,"itemdata"],[1,"itemHeaders"],[1,"Mname","itemName"],[1,"Mdescription","itemDescription"],[1,"checks"],["class","Mvegan check itemVegan",4,"ngIf"],["class","Mvegetarian check itemVegetarian",4,"ngIf"],["class","Mlactosefree check itemLactose",4,"ngIf"],["class","Mglutenfree check itemGluten",4,"ngIf"],[1,"Mvegan","check","itemVegan"],["src","http://localhost:3000/uploads/vegan.png","alt","Logo",1,"iconimg"],[1,"Mvegetarian","check","itemVegetarian"],["src","http://localhost:3000/uploads/vegetarian.png","alt","Logo",1,"iconimg"],[1,"Mlactosefree","check","itemLactose"],["src","http://localhost:3000/uploads/lactose.png","alt","Logo",1,"iconimg"],[1,"Mglutenfree","check","itemGluten"],["src","http://localhost:3000/uploads/gluten.png","alt","Logo",1,"iconimg"],[1,"drinksContent","itemS"],[1,"desertsContent","itemS"]],template:function(r,o){if(r&1){let s=H();a(0,"div",2)(1,"div",3)(2,"div",4),g(3,"img",5),l(),a(4,"div",6)(5,"div",7),E("click",function(){return y(s),_(o.ShowCart("cart"))}),g(6,"span",8)(7,"i",9),l(),a(8,"div",10)(9,"div",11)(10,"div",12),u(11,"Item Name"),l(),a(12,"div",13),u(13,"Unit Price"),l(),a(14,"div",14),u(15,"Quantity"),l(),a(16,"div",15),E("click",function(){return y(s),_(o.closeCart("cart"))}),g(17,"i",16),l()(),a(18,"div",17),T(19,fu,12,3,"div",18),l(),a(20,"div",19),T(21,pu,3,1,"div",20)(22,mu,3,0,"div",21),l()(),a(23,"button",22),E("click",function(){return y(s),_(o.logout("logout requested!"))}),u(24,"Log Out"),l()()(),a(25,"div",23)(26,"div",24),g(27,"img",25),l(),a(28,"div",26)(29,"div",27)(30,"label",28),u(31),l()(),a(32,"div",29)(33,"div",30),T(34,gu,2,0,"label",31)(35,yu,2,0,"label",32),l(),a(36,"div",33)(37,"label",34),g(38,"img",35),u(39),Ae(40,"number"),l()(),a(41,"div",36)(42,"label",34)(43,"div",37)(44,"span",38),u(45),l()()()()()(),a(46,"div",39)(47,"div",40)(48,"div",41)(49,"div",42,0),E("click",function(){return y(s),_(o.showDiv("mealsBox","mealsTab"))}),a(51,"label",43),u(52,"Meals"),l()(),a(53,"div",44,0),E("click",function(){return y(s),_(o.showDiv("drinksBox","drinksTab"))}),a(55,"label",43),u(56,"Drinks"),l()(),a(57,"div",45,0),E("click",function(){return y(s),_(o.showDiv("desertsBox","desertTab"))}),a(59,"label",43),u(60,"Desert"),l()()(),g(61,"div",46),l(),a(62,"div",47)(63,"div",48,1),T(65,xu,19,8,"div",49),l(),a(66,"div",50,1),T(68,Ou,19,8,"div",51),l(),a(69,"div",52,1),T(71,Du,19,8,"div",53),l()()()()()}r&2&&(h(19),b("ngForOf",o.orderArray),h(2),b("ngIf",o.getTotal()>0),h(),b("ngIf",o.getTotal()>0),h(5),b("src","http://localhost:3000/"+o.restaurant.images,ve),h(4),j(o.restaurant.name),h(3),b("ngIf",o.restaurant.open),h(),b("ngIf",!o.restaurant.open),h(4),N("",Xe(40,12,o.distance,"1.1-1"),"KM"),h(6),j(o.restaurant.halalRating),h(20),b("ngForOf",o.mealsArray),h(3),b("ngForOf",o.drinksArray),h(3),b("ngForOf",o.desertsArray))},dependencies:[Ie,pe,We,Oe,yn],styles:['.mainDiv[_ngcontent-%COMP%]{background-color:#e5e8e2;width:100vw;height:auto;display:flex;flex-direction:column;z-index:0;position:relative}.topBar[_ngcontent-%COMP%]{width:100%;display:flex;margin-top:1%;margin-bottom:1%;margin-right:10px;height:10%;position:relative;flex-direction:row;justify-content:space-between;z-index:5;padding-right:20px}.logo[_ngcontent-%COMP%]{width:15%}.logoimg[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.logoutDiv[_ngcontent-%COMP%]{width:10%;display:flex;justify-content:space-evenly;align-items:center;position:relative;z-index:5}.cartIcon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-end;height:50%;margin-right:30px;color:#334625}.badge[_ngcontent-%COMP%]{position:relative;top:0;right:0;background:red;color:#fff;font-size:14px;font-weight:700;width:20px;height:20px;text-align:center;line-height:20px;border-radius:50%;transform:translate(50%,-50%)}.fa-shopping-cart[_ngcontent-%COMP%]{font-size:x-large;transition:transform .3s ease}.fa-shopping-cart[_ngcontent-%COMP%]:hover{transform:scale(1.8)}.cart[_ngcontent-%COMP%]{display:none;position:fixed;z-index:500;transition:ease .5s;opacity:0;width:30vw;height:70vh;background-color:#9ebb8d;border-radius:9px;right:5%;top:10%;flex-direction:column;justify-content:space-between;box-shadow:7px 7px 8px 8px #0003}.headers[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;margin-top:10px}.closeCart[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-radius:6px;background-color:#f08080;cursor:pointer;width:5%;transition:ease .5s}.closeCart[_ngcontent-%COMP%]:hover{background-color:red}.repeatingItems[_ngcontent-%COMP%]{height:70%;width:100%;display:flex;flex-direction:column;overflow-y:auto}.cartDivItems[_ngcontent-%COMP%]{width:95%;height:auto;display:flex;flex-direction:row;margin-bottom:20px}.itemNameC[_ngcontent-%COMP%]{font-weight:700;font-family:Georgia,serif;font-size:large;width:50%;margin-left:10px;display:flex;justify-content:left;align-items:center}.itemPriceC[_ngcontent-%COMP%]{font-family:Georgia,serif;font-size:large;width:20%;margin-left:10px;display:flex;justify-content:left;align-items:center}.quantityC[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly;width:30%}.dltBtnC[_ngcontent-%COMP%]{transition:.5s ease;width:33.3%;display:flex;justify-content:center;align-items:center;border-radius:6px}.dltBtnC[_ngcontent-%COMP%]:hover{background-color:red}.itemQuantityC[_ngcontent-%COMP%], .addToCartBtnC[_ngcontent-%COMP%]{transition:.5s ease;width:33.3%;display:flex;justify-content:center;align-items:center;border-radius:6px}.addToCartBtnC[_ngcontent-%COMP%]:hover{background-color:#39ff14}.conclusionDiv[_ngcontent-%COMP%]{display:flex;border-top:solid 1px;flex-direction:row;justify-content:space-evenly;align-items:center;padding-top:10px;height:13%}.totalPriceC[_ngcontent-%COMP%]{width:50%;display:flex;justify-content:center;font-weight:700}.checkoutC[_ngcontent-%COMP%]{width:50%;display:flex;justify-content:center}.checkoutBtnC[_ngcontent-%COMP%]{background-color:#4b6134;color:#d3d3d3;border-radius:6px;display:flex;justify-content:center;align-items:center;cursor:pointer;width:60%}.mainContent[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:auto;align-items:center;overflow:auto}.coverPhoto[_ngcontent-%COMP%]{width:100%;height:40vh;justify-content:center}.coverImg[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.resHeaders[_ngcontent-%COMP%]{width:100%;height:10%;display:flex;flex-direction:row;justify-content:space-between;padding-right:3%}.resName[_ngcontent-%COMP%]{margin-left:50px;display:flex;align-items:center}.resTitle[_ngcontent-%COMP%]{font-weight:700;font-family:Georgia,serif;font-size:300%}.logoutBtn[_ngcontent-%COMP%]{margin-top:20px;bottom:0;display:inline-flex;align-items:center;justify-content:center;padding:8px 16px;font-size:16px;font-weight:500;cursor:pointer;transition:all .3s ease;outline:none;-webkit-user-select:none;user-select:none;color:#fff;border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:#000;border-right-color:#000;border-bottom-color:#000;border-left-color:#000;border-radius:4px;background-color:#334625;box-shadow:7px 7px 8px #0003}.logoutBtn[_ngcontent-%COMP%]:hover{transition:all .3s ease;transform:scale(1.1);background-color:#4b6134}.disrating[_ngcontent-%COMP%]{margin-top:1%;display:flex;width:30%;flex-direction:row;justify-content:space-evenly;align-items:center}.disLabel[_ngcontent-%COMP%]{font-weight:700}@keyframes _ngcontent-%COMP%_flicker{0%,18%,22%,25%,53%,57%,to{text-shadow:0 0 4px #fff,0 0 11px #fff,0 0 19px #fff,0 0 40px #FF0000,0 0 80px #FF0000,0 0 90px #FF0000,0 0 100px #FF0000,0 0 150px #FF0000}20%,24%,55%{text-shadow:none}}@keyframes _ngcontent-%COMP%_flicker2{0%,18%,22%,25%,53%,57%,to{text-shadow:0 0 4px #e5e8e2,0 0 11px #e5e8e2,0 0 19px #e5e8e2,0 0 40px rgb(187,70,134),0 0 80px rgb(187,70,134),0 0 90px rgb(187,70,134),0 0 100px rgb(187,70,134),0 0 150px rgb(187,70,134)}20%,24%,55%{text-shadow:none}}@keyframes _ngcontent-%COMP%_flicker3{0%,18%,22%,25%,53%,57%,to{text-shadow:0 0 4px #e5e8e2,0 0 11px #e5e8e2,0 0 19px #e5e8e2,0 0 40px #39FF14,0 0 80px #39FF14,0 0 90px #39FF14,0 0 100px #39FF14,0 0 150px #39FF14}20%,24%,55%{text-shadow:none}}.opLabel[_ngcontent-%COMP%]{font-size:large;font-weight:700;color:#39ff14;text-shadow:0 0 7px #e5e8e2,0 0 10px #e5e8e2,0 0 21px #e5e8e2,0 0 42px #39FF14,0 0 82px #39FF14,0 0 92px #39FF14,0 0 102px #39FF14,0 0 151px #39FF14;animation:_ngcontent-%COMP%_flicker3 1.5s infinite alternate;font-family:Vibur,sans-serif}.clLabel[_ngcontent-%COMP%]{font-size:large;font-weight:700;color:red;text-shadow:0 0 7px #e5e8e2,0 0 10px #e5e8e2,0 0 21px #e5e8e2,0 0 42px #FF0000,0 0 82px #FF0000,0 0 92px #FF0000,0 0 102px #FF0000,0 0 151px #FF0000;animation:_ngcontent-%COMP%_flicker 1.5s infinite alternate;font-family:Vibur,sans-serif}.OorC[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_flicker2 1.5s infinite alternate;border:2px solid rgb(187,70,134);border-radius:5px;padding:5px}.star[_ngcontent-%COMP%]{width:52px;height:52px;background-color:gold;clip-path:polygon(50% 0%,61% 35%,98% 35%,68% 57%,79% 91%,50% 70%,21% 91%,32% 57%,2% 35%,39% 35%);display:flex;justify-content:center;align-items:center;position:relative}.number[_ngcontent-%COMP%]{font-size:18px;color:#000;font-weight:700}.menues[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:15px;width:100%;height:auto;background-color:#9ebb8d;border-radius:9px;overflow-y:scroll}.tabsDiv[_ngcontent-%COMP%]{display:flex;height:5vh;width:100%;background-color:#e5e8e2;flex-direction:row;justify-content:space-evenly}.firstHalf[_ngcontent-%COMP%]{width:50%;height:100%;display:flex;flex-direction:row}.tab[_ngcontent-%COMP%]{background-color:#9ebb8d;border-top-left-radius:6px;border-top-right-radius:6px;width:150px;display:flex;justify-content:center;align-items:center;font-family:Vibur,sans-serif;font-weight:700;font-size:large;transition:ease .3s;margin-right:10px}.mealsTab[_ngcontent-%COMP%]{background-color:#9ebb8d}.drinksTab[_ngcontent-%COMP%], .desertsTab[_ngcontent-%COMP%]{background-color:#bcd9ab}.menueContainer[_ngcontent-%COMP%]{display:none}.mealsContainer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100%;width:100%}.drinksContainer[_ngcontent-%COMP%], .desertsContainer[_ngcontent-%COMP%]{display:none}.itemsDiv[_ngcontent-%COMP%]{display:flex;height:90%;width:100%}.itemS[_ngcontent-%COMP%]{display:flex;height:fit-content;width:30%;margin:20px;flex-direction:row;border-radius:9px;border:solid 1px black;background-color:#f0e6e6;box-shadow:7px 7px 8px #0003}.imgandprice[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:40%;border-right:1px solid black;justify-content:center;align-items:center}.itemImageDiv[_ngcontent-%COMP%]{display:flex;border-top-left-radius:9px;border-bottom-left-radius:9px;width:100%;height:85%}.itemImage[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-top-left-radius:9px;border-bottom:solid 1px black}.itemPrice[_ngcontent-%COMP%]{margin-top:5px;display:flex;width:100%;height:15%;justify-content:center;font-family:"lato" sans-serif;font-weight:700;font-size:large}.addToCartBtn[_ngcontent-%COMP%]{margin-bottom:10px;padding:2px;transition:ease .3s;width:80%;height:80%;display:flex;justify-content:center;cursor:pointer;align-items:center;border-radius:6px;background-color:#9ebb8d}.addToCartBtn[_ngcontent-%COMP%]:hover{background-color:#4b6134;color:#d3d3d3}.itemdata[_ngcontent-%COMP%]{display:flex;width:60%;flex-direction:column;margin-left:5px;margin-top:10px}.itemHeaders[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;flex-direction:row;border-bottom:solid grey 1px}.itemName[_ngcontent-%COMP%]{font-weight:700;font-family:Georgia,serif;font-size:large;width:100%;margin-left:10px;display:flex;justify-content:left;align-items:center}.itemDescription[_ngcontent-%COMP%]{font-family:DM sans,sans-serif;font-size:small;width:100%;margin-left:10px;margin-top:10px;padding-right:10px}.checks[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;height:20%;width:100%;margin-top:10px}.check[_ngcontent-%COMP%]{margin:5px 5px 5px 10px;height:100%;width:25%;transition:transform .3s ease}.check[_ngcontent-%COMP%]:hover{transform:scale(1.8)}.iconimg[_ngcontent-%COMP%]{object-fit:contain;height:100%;width:100%}']});let n=e;return n})();function Fu(n,e){if(n&1&&(a(0,"div"),u(1),l()),n&2){let t=V();h(),N(" ",t.token,`
`)}}function Au(n,e){if(n&1){let t=H();a(0,"button",3),E("click",function(){y(t);let r=V();return _(r.toDashboard())}),u(1,"Proceed"),l()}}var wa=(()=>{let e=class e{constructor(i,r,o){this.route=i,this.router=r,this.http=o,this.isCapturedSubject=new fn(!1),this.isCaptured$=this.isCapturedSubject.asObservable()}ngOnInit(){console.log("successfully paym,ent page loaded!!!!"),this.route.queryParams.subscribe(i=>{this.token=i.token,this.payerId=i.payerId,this.orderId=i.orderId,console.log(`paymentId aka token in successful payment page: ${this.token}`),console.log(`orderId in successfil payment page: ${this.orderId}`),this.token&&this.orderId&&(console.log(`paymentId aka token: ${this.token}`),console.log(`orderId: ${this.orderId}`),console.log("about to send capture payment request"),this.http.post("http://localhost:3000/capturePayment",{token:this.token,orderId:this.orderId}).subscribe({next:r=>{r.success?(console.log(` ${r.message}`),this.isCapturedSubject.next(!0)):alert(r.message)},error:r=>{console.error("error: ",r)}}),console.log("sent capture payment request successfully"))})}toDashboard(){console.log("proceed btn clicked"),this.router.navigateByUrl("/dashboard")}};e.\u0275fac=function(r){return new(r||e)(x(Ge),x(ge),x(me))},e.\u0275cmp=ie({type:e,selectors:[["app-succesfull-payment"]],standalone:!0,features:[oe],decls:6,vars:4,consts:[[4,"ngIf"],[1,"navigateBtn"],[3,"click",4,"ngIf"],[3,"click"]],template:function(r,o){r&1&&(a(0,"p"),u(1,"succesfull-payment works!"),l(),T(2,Fu,2,1,"div",0),a(3,"div",1),T(4,Au,2,0,"button",2),Ae(5,"async"),l()),r&2&&(h(2),b("ngIf",o.token),h(2),b("ngIf",Or(5,2,o.isCaptured$)))},dependencies:[Ie,pe,Oe,Fr]});let n=e;return n})();var Ea=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:$r},{path:"dashboard",component:va},{path:"listing-form",component:ba},{path:"error",component:zr},{path:"restaurantAdmin",component:Ca},{path:"restaurantPage/:id",component:xa},{path:"succesfullPayment",component:wa}];var Vu="@",Ru=(()=>{let e=class e{constructor(i,r,o,s,d){this.doc=i,this.delegate=r,this.zone=o,this.animationType=s,this.moduleImpl=d,this._rendererFactoryPromise=null,this.scheduler=di(Cr,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-LZ3IAB53.mjs").then(r=>r)).catch(r=>{throw new at(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:o})=>{this._engine=r(this.animationType,this.doc);let s=new o(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(i,r){let o=this.delegate.createRenderer(i,r);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let s=new fr(o);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(d=>{let c=d.createRenderer(i,r);s.use(c),this.scheduler?.notify(9)}).catch(d=>{s.use(o)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){br()},e.\u0275prov=Dt({token:e,factory:e.\u0275fac});let n=e;return n})(),fr=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,r){this.delegate.insertBefore(e,t,i,r)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(Vu)}};function Sa(n="animations"){return wr("NgAsyncAnimations"),_r([{provide:xr,useFactory:(e,t,i)=>new Ru(e,t,i,n),deps:[Dr,Lr,pn]},{provide:vr,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var ka={providers:[Ir({eventCoalescing:!0}),Wr(Ea),jr(),Sa(),Vr(Rr(),Nr()),Mr,Ie,Ur]};var Nu={providers:[qr()]},Oa=Pr(ka,Nu);var Lu=()=>Br(Qr,Oa),sg=Lu;export{sg as a};
